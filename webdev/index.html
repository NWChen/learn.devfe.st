<!DOCTYPE html><html><head><meta charset="utf-8"><style>html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }

body{
  color:#444;
  font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman',
              "Hiragino Sans GB", "STXihei", "微软雅黑", serif;
  font-size:12px;
  line-height:1.5em;
  background:#fefefe;
  width: 45em;
  margin: 10px auto;
  padding: 1em;
  outline: 1300px solid #FAFAFA;
}

a{ color: #0645ad; text-decoration:none;}
a:visited{ color: #0b0080; }
a:hover{ color: #06e; }
a:active{ color:#faa700; }
a:focus{ outline: thin dotted; }
a:hover, a:active{ outline: 0; }

span.backtick {
  border:1px solid #EAEAEA;
  border-radius:3px;
  background:#F8F8F8;
  padding:0 3px 0 3px;
}

::-moz-selection{background:rgba(255,255,0,0.3);color:#000}
::selection{background:rgba(255,255,0,0.3);color:#000}

a::-moz-selection{background:rgba(255,255,0,0.3);color:#0645ad}
a::selection{background:rgba(255,255,0,0.3);color:#0645ad}

p{
margin:1em 0;
}

img{
max-width:100%;
}

h1,h2,h3,h4,h5,h6{
font-weight:normal;
color:#111;
line-height:1em;
}
h4,h5,h6{ font-weight: bold; }
h1{ font-size:2.5em; }
h2{ font-size:2em; border-bottom:1px solid silver; padding-bottom: 5px; }
h3{ font-size:1.5em; }
h4{ font-size:1.2em; }
h5{ font-size:1em; }
h6{ font-size:0.9em; }

blockquote{
color:#666666;
margin:0;
padding-left: 3em;
border-left: 0.5em #EEE solid;
}
hr { display: block; height: 2px; border: 0; border-top: 1px solid #aaa;border-bottom: 1px solid #eee; margin: 1em 0; padding: 0; }


pre , code, kbd, samp { 
  color: #000; 
  font-family: monospace; 
  font-size: 0.88em; 
  border-radius:3px;
  background-color: #F8F8F8;
  border: 1px solid #CCC; 
}
pre { white-space: pre; white-space: pre-wrap; word-wrap: break-word; padding: 5px 12px;}
pre code { border: 0px !important; padding: 0;}
code { padding: 0 3px 0 3px; }

b, strong { font-weight: bold; }

dfn { font-style: italic; }

ins { background: #ff9; color: #000; text-decoration: none; }

mark { background: #ff0; color: #000; font-style: italic; font-weight: bold; }

sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }

ul, ol { margin: 1em 0; padding: 0 0 0 2em; }
li p:last-child { margin:0 }
dd { margin: 0 0 0 2em; }

img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }

table { border-collapse: collapse; border-spacing: 0; }
td { vertical-align: top; }

@media only screen and (min-width: 480px) {
body{font-size:14px;}
}

@media only screen and (min-width: 768px) {
body{font-size:16px;}
}

@media print {
  * { background: transparent !important; color: black !important; filter:none !important; -ms-filter: none !important; }
  body{font-size:12pt; max-width:100%; outline:none;}
  a, a:visited { text-decoration: underline; }
  hr { height: 1px; border:0; border-bottom:1px solid black; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; padding-right: 1em; page-break-inside: avoid; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page :left { margin: 15mm 20mm 15mm 10mm; }
  @page :right { margin: 15mm 10mm 15mm 20mm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
}
</style><style>/* to allow side-by-side code blocks */
.join {
	height: 0;
	margin: 0;
}
.join + pre {
	width: 45%;
  float:left;
	display: inline-block;
	margin-top: 0;
	margin-bottom: 0;
}
pre + pre {
	display: inline-block;
	width: 45%;
	float: right;
	margin-top: 0;
	margin-bottom: 0;
}
pre + .clear {
	margin: 0;
	height: 0;
	clear: both;
}
ul ul {
	margin-top: 0;
	margin-bottom: 0;
}

/* Fork me on Github*/
img.github {
  position: absolute;
  top: 0;
  right: 0;
  border: 0;
}

/* headers and top links*/

#top {
  position: absolute;
  top:0;
}

.top {
  float:right;
  padding-top: 20px;
}

/* "Responsive" */
body {
  width: 90%;
  max-width: 50em;
}

/* make tables pretty */
table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      border-bottom-width: 3px;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }</style><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

pre code {
  display: block; padding: 0.5em;
  color: #333;
  background: #f8f8ff
}

pre .comment,
pre .template_comment,
pre .diff .header,
pre .javadoc {
  color: #998;
  font-style: italic
}

pre .keyword,
pre .css .rule .keyword,
pre .winutils,
pre .javascript .title,
pre .nginx .title,
pre .subst,
pre .request,
pre .status {
  color: #333;
  font-weight: bold
}

pre .number,
pre .hexcolor,
pre .ruby .constant {
  color: #099;
}

pre .string,
pre .tag .value,
pre .phpdoc,
pre .tex .formula {
  color: #d14
}

pre .title,
pre .id,
pre .coffeescript .params,
pre .scss .preprocessor {
  color: #900;
  font-weight: bold
}

pre .javascript .title,
pre .lisp .title,
pre .clojure .title,
pre .subst {
  font-weight: normal
}

pre .class .title,
pre .haskell .type,
pre .vhdl .literal,
pre .tex .command {
  color: #458;
  font-weight: bold
}

pre .tag,
pre .tag .title,
pre .rules .property,
pre .django .tag .keyword {
  color: #000080;
  font-weight: normal
}

pre .attribute,
pre .variable,
pre .lisp .body {
  color: #008080
}

pre .regexp {
  color: #009926
}

pre .class {
  color: #458;
  font-weight: bold
}

pre .symbol,
pre .ruby .symbol .string,
pre .lisp .keyword,
pre .tex .special,
pre .prompt {
  color: #990073
}

pre .built_in,
pre .lisp .title,
pre .clojure .built_in {
  color: #0086b3
}

pre .preprocessor,
pre .pi,
pre .doctype,
pre .shebang,
pre .cdata {
  color: #999;
  font-weight: bold
}

pre .deletion {
  background: #fdd
}

pre .addition {
  background: #dfd
}

pre .diff .change {
  background: #0086b3
}

pre .chunk {
  color: #aaa
}</style><script>var hljs=new function(){function l(o){return o.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function b(p){for(var o=p.firstChild;o;o=o.nextSibling){if(o.nodeName=="CODE"){return o}if(!(o.nodeType==3&&o.nodeValue.match(/\s+/))){break}}}function h(p,o){return Array.prototype.map.call(p.childNodes,function(q){if(q.nodeType==3){return o?q.nodeValue.replace(/\n/g,""):q.nodeValue}if(q.nodeName=="BR"){return"\n"}return h(q,o)}).join("")}function a(q){var p=(q.className+" "+q.parentNode.className).split(/\s+/);p=p.map(function(r){return r.replace(/^language-/,"")});for(var o=0;o<p.length;o++){if(e[p[o]]||p[o]=="no-highlight"){return p[o]}}}function c(q){var o=[];(function p(r,s){for(var t=r.firstChild;t;t=t.nextSibling){if(t.nodeType==3){s+=t.nodeValue.length}else{if(t.nodeName=="BR"){s+=1}else{if(t.nodeType==1){o.push({event:"start",offset:s,node:t});s=p(t,s);o.push({event:"stop",offset:s,node:t})}}}}return s})(q,0);return o}function j(x,v,w){var p=0;var y="";var r=[];function t(){if(x.length&&v.length){if(x[0].offset!=v[0].offset){return(x[0].offset<v[0].offset)?x:v}else{return v[0].event=="start"?x:v}}else{return x.length?x:v}}function s(A){function z(B){return" "+B.nodeName+'="'+l(B.value)+'"'}return"<"+A.nodeName+Array.prototype.map.call(A.attributes,z).join("")+">"}while(x.length||v.length){var u=t().splice(0,1)[0];y+=l(w.substr(p,u.offset-p));p=u.offset;if(u.event=="start"){y+=s(u.node);r.push(u.node)}else{if(u.event=="stop"){var o,q=r.length;do{q--;o=r[q];y+=("</"+o.nodeName.toLowerCase()+">")}while(o!=u.node);r.splice(q,1);while(q<r.length){y+=s(r[q]);q++}}}}return y+l(w.substr(p))}function f(q){function o(s,r){return RegExp(s,"m"+(q.cI?"i":"")+(r?"g":""))}function p(y,w){if(y.compiled){return}y.compiled=true;var s=[];if(y.k){var r={};function z(A,t){t.split(" ").forEach(function(B){var C=B.split("|");r[C[0]]=[A,C[1]?Number(C[1]):1];s.push(C[0])})}y.lR=o(y.l||hljs.IR,true);if(typeof y.k=="string"){z("keyword",y.k)}else{for(var x in y.k){if(!y.k.hasOwnProperty(x)){continue}z(x,y.k[x])}}y.k=r}if(w){if(y.bWK){y.b="\\b("+s.join("|")+")\\s"}y.bR=o(y.b?y.b:"\\B|\\b");if(!y.e&&!y.eW){y.e="\\B|\\b"}if(y.e){y.eR=o(y.e)}y.tE=y.e||"";if(y.eW&&w.tE){y.tE+=(y.e?"|":"")+w.tE}}if(y.i){y.iR=o(y.i)}if(y.r===undefined){y.r=1}if(!y.c){y.c=[]}for(var v=0;v<y.c.length;v++){if(y.c[v]=="self"){y.c[v]=y}p(y.c[v],y)}if(y.starts){p(y.starts,w)}var u=[];for(var v=0;v<y.c.length;v++){u.push(y.c[v].b)}if(y.tE){u.push(y.tE)}if(y.i){u.push(y.i)}y.t=u.length?o(u.join("|"),true):{exec:function(t){return null}}}p(q)}function d(D,E){function o(r,M){for(var L=0;L<M.c.length;L++){var K=M.c[L].bR.exec(r);if(K&&K.index==0){return M.c[L]}}}function s(K,r){if(K.e&&K.eR.test(r)){return K}if(K.eW){return s(K.parent,r)}}function t(r,K){return K.i&&K.iR.test(r)}function y(L,r){var K=F.cI?r[0].toLowerCase():r[0];return L.k.hasOwnProperty(K)&&L.k[K]}function G(){var K=l(w);if(!A.k){return K}var r="";var N=0;A.lR.lastIndex=0;var L=A.lR.exec(K);while(L){r+=K.substr(N,L.index-N);var M=y(A,L);if(M){v+=M[1];r+='<span class="'+M[0]+'">'+L[0]+"</span>"}else{r+=L[0]}N=A.lR.lastIndex;L=A.lR.exec(K)}return r+K.substr(N)}function z(){if(A.sL&&!e[A.sL]){return l(w)}var r=A.sL?d(A.sL,w):g(w);if(A.r>0){v+=r.keyword_count;B+=r.r}return'<span class="'+r.language+'">'+r.value+"</span>"}function J(){return A.sL!==undefined?z():G()}function I(L,r){var K=L.cN?'<span class="'+L.cN+'">':"";if(L.rB){x+=K;w=""}else{if(L.eB){x+=l(r)+K;w=""}else{x+=K;w=r}}A=Object.create(L,{parent:{value:A}});B+=L.r}function C(K,r){w+=K;if(r===undefined){x+=J();return 0}var L=o(r,A);if(L){x+=J();I(L,r);return L.rB?0:r.length}var M=s(A,r);if(M){if(!(M.rE||M.eE)){w+=r}x+=J();do{if(A.cN){x+="</span>"}A=A.parent}while(A!=M.parent);if(M.eE){x+=l(r)}w="";if(M.starts){I(M.starts,"")}return M.rE?0:r.length}if(t(r,A)){throw"Illegal"}w+=r;return r.length||1}var F=e[D];f(F);var A=F;var w="";var B=0;var v=0;var x="";try{var u,q,p=0;while(true){A.t.lastIndex=p;u=A.t.exec(E);if(!u){break}q=C(E.substr(p,u.index-p),u[0]);p=u.index+q}C(E.substr(p));return{r:B,keyword_count:v,value:x,language:D}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:l(E)}}else{throw H}}}function g(s){var o={keyword_count:0,r:0,value:l(s)};var q=o;for(var p in e){if(!e.hasOwnProperty(p)){continue}var r=d(p,s);r.language=p;if(r.keyword_count+r.r>q.keyword_count+q.r){q=r}if(r.keyword_count+r.r>o.keyword_count+o.r){q=o;o=r}}if(q.language){o.second_best=q}return o}function i(q,p,o){if(p){q=q.replace(/^((<[^>]+>|\t)+)/gm,function(r,v,u,t){return v.replace(/\t/g,p)})}if(o){q=q.replace(/\n/g,"<br>")}return q}function m(r,u,p){var v=h(r,p);var t=a(r);if(t=="no-highlight"){return}var w=t?d(t,v):g(v);t=w.language;var o=c(r);if(o.length){var q=document.createElement("pre");q.innerHTML=w.value;w.value=j(o,c(q),v)}w.value=i(w.value,u,p);var s=r.className;if(!s.match("(\\s|^)(language-)?"+t+"(\\s|$)")){s=s?(s+" "+t):t}r.innerHTML=w.value;r.className=s;r.result={language:t,kw:w.keyword_count,re:w.r};if(w.second_best){r.second_best={language:w.second_best.language,kw:w.second_best.keyword_count,re:w.second_best.r}}}function n(){if(n.called){return}n.called=true;Array.prototype.map.call(document.getElementsByTagName("pre"),b).filter(Boolean).forEach(function(o){m(o,hljs.tabReplace)})}function k(){window.addEventListener("DOMContentLoaded",n,false);window.addEventListener("load",n,false)}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=m;this.initHighlighting=n;this.initHighlightingOnLoad=k;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.BE={b:"\\\\[\\s\\S]",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(q,r){var o={};for(var p in q){o[p]=q[p]}if(r){for(var p in r){o[p]=r[p]}}return o}}();hljs.LANGUAGES.bash=function(a){var g="true false";var e="if then else elif fi for break continue while in do done echo exit return set declare";var c={cN:"variable",b:"\\$[a-zA-Z0-9_#]+"};var b={cN:"variable",b:"\\${([^}]|\\\\})+}"};var h={cN:"string",b:'"',e:'"',i:"\\n",c:[a.BE,c,b],r:0};var d={cN:"string",b:"'",e:"'",c:[{b:"''"}],r:0};var f={cN:"test_condition",b:"",e:"",c:[h,d,c,b],k:{literal:g},r:0};return{k:{keyword:e,literal:g},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},c,b,a.HCM,h,d,a.inherit(f,{b:"\\[ ",e:" \\]",r:0}),a.inherit(f,{b:"\\[\\[ ",e:" \\]\\]"})]}}(hljs);hljs.LANGUAGES.cs=function(a){return{k:"abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while ascending descending from get group into join let orderby partial select set value var where yield",c:[{cN:"comment",b:"///",e:"$",rB:true,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},a.CLCM,a.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},a.ASM,a.QSM,a.CNM]}}(hljs);hljs.LANGUAGES.ruby=function(e){var a="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?";var j="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?";var g={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include"};var c={cN:"yardoctag",b:"@[A-Za-z]+"};var k=[{cN:"comment",b:"#",e:"$",c:[c]},{cN:"comment",b:"^\\=begin",e:"^\\=end",c:[c],r:10},{cN:"comment",b:"^__END__",e:"\\n$"}];var d={cN:"subst",b:"#\\{",e:"}",l:a,k:g};var i=[e.BE,d];var b=[{cN:"string",b:"'",e:"'",c:i,r:0},{cN:"string",b:'"',e:'"',c:i,r:0},{cN:"string",b:"%[qw]?\\(",e:"\\)",c:i},{cN:"string",b:"%[qw]?\\[",e:"\\]",c:i},{cN:"string",b:"%[qw]?{",e:"}",c:i},{cN:"string",b:"%[qw]?<",e:">",c:i,r:10},{cN:"string",b:"%[qw]?/",e:"/",c:i,r:10},{cN:"string",b:"%[qw]?%",e:"%",c:i,r:10},{cN:"string",b:"%[qw]?-",e:"-",c:i,r:10},{cN:"string",b:"%[qw]?\\|",e:"\\|",c:i,r:10}];var h={cN:"function",bWK:true,e:" |$|;",k:"def",c:[{cN:"title",b:j,l:a,k:g},{cN:"params",b:"\\(",e:"\\)",l:a,k:g}].concat(k)};var f=k.concat(b.concat([{cN:"class",bWK:true,e:"$|;",k:"class module",c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(k)},h,{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:b.concat([{b:j}]),r:0},{cN:"symbol",b:a+":",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:k.concat([{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[e.BE,d]}]),r:0}]));d.c=f;h.c[1].c=f;return{l:a,k:g,c:f}}(hljs);hljs.LANGUAGES.diff=function(a){return{c:[{cN:"chunk",b:"^\\@\\@ +\\-\\d+,\\d+ +\\+\\d+,\\d+ +\\@\\@$",r:10},{cN:"chunk",b:"^\\*\\*\\* +\\d+,\\d+ +\\*\\*\\*\\*$",r:10},{cN:"chunk",b:"^\\-\\-\\- +\\d+,\\d+ +\\-\\-\\-\\-$",r:10},{cN:"header",b:"Index: ",e:"$"},{cN:"header",b:"=====",e:"=====$"},{cN:"header",b:"^\\-\\-\\-",e:"$"},{cN:"header",b:"^\\*{3} ",e:"$"},{cN:"header",b:"^\\+\\+\\+",e:"$"},{cN:"header",b:"\\*{5}",e:"\\*{5}$"},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}(hljs);hljs.LANGUAGES.javascript=function(a){return{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const",literal:"true false null undefined NaN Infinity"},c:[a.ASM,a.QSM,a.CLCM,a.CBLCLM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",i:"\\n",c:[{b:"\\\\/"}]},{b:"<",e:">;",sL:"xml"}],r:0},{cN:"function",bWK:true,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[a.CLCM,a.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}(hljs);hljs.LANGUAGES.css=function(a){var b={cN:"function",b:a.IR+"\\(",e:"\\)",c:[a.NM,a.ASM,a.QSM]};return{cI:true,i:"[=/|']",c:[a.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",eE:true,k:"import page media charset",c:[b,a.ASM,a.QSM,a.NM]},{cN:"tag",b:a.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[a.CBLCLM,{cN:"rule",b:"[^\\s]",rB:true,e:";",eW:true,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:true,i:"[^\\s]",starts:{cN:"value",eW:true,eE:true,c:[b,a.NM,a.QSM,a.ASM,a.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}(hljs);hljs.LANGUAGES.xml=function(a){var c="[A-Za-z0-9\\._:-]+";var b={eW:true,c:[{cN:"attribute",b:c,r:0},{b:'="',rB:true,e:'"',c:[{cN:"value",b:'"',eW:true}]},{b:"='",rB:true,e:"'",c:[{cN:"value",b:"'",eW:true}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:true,c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[b],starts:{e:"</style>",rE:true,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[b],starts:{e:"<\/script>",rE:true,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},b]}]}}(hljs);hljs.LANGUAGES.http=function(a){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:true,e:"$",c:[{cN:"string",b:" ",e:" ",eB:true,eE:true}]},{cN:"attribute",b:"^\\w",e:": ",eE:true,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:true}}]}}(hljs);hljs.LANGUAGES.java=function(a){return{k:"false synchronized int abstract float private char boolean static null if const for true while long throw strictfp finally protected import native final return void enum else break transient new catch instanceof byte super volatile case assert short package default double public try this switch continue throws",c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},a.CLCM,a.CBLCLM,a.ASM,a.QSM,{cN:"class",bWK:true,e:"{",k:"class interface",i:":",c:[{bWK:true,k:"extends implements",r:10},{cN:"title",b:a.UIR}]},a.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}}(hljs);hljs.LANGUAGES.php=function(a){var e={cN:"variable",b:"\\$+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*"};var b=[a.inherit(a.ASM,{i:null}),a.inherit(a.QSM,{i:null}),{cN:"string",b:'b"',e:'"',c:[a.BE]},{cN:"string",b:"b'",e:"'",c:[a.BE]}];var c=[a.BNM,a.CNM];var d={cN:"title",b:a.UIR};return{cI:true,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return implements parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception php_user_filter default die require __FUNCTION__ enddeclare final try this switch continue endfor endif declare unset true false namespace trait goto instanceof insteadof __DIR__ __NAMESPACE__ __halt_compiler",c:[a.CLCM,a.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"}]},{cN:"comment",eB:true,b:"__halt_compiler.+?;",eW:true},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[a.BE]},{cN:"preprocessor",b:"<\\?php",r:10},{cN:"preprocessor",b:"\\?>"},e,{cN:"function",bWK:true,e:"{",k:"function",i:"\\$|\\[|%",c:[d,{cN:"params",b:"\\(",e:"\\)",c:["self",e,a.CBLCLM].concat(b).concat(c)}]},{cN:"class",bWK:true,e:"{",k:"class",i:"[:\\(\\$]",c:[{bWK:true,eW:true,k:"extends",c:[d]},d]},{b:"=>"}].concat(b).concat(c)}}(hljs);hljs.LANGUAGES.python=function(a){var f={cN:"prompt",b:"^(>>>|\\.\\.\\.) "};var c=[{cN:"string",b:"(u|b)?r?'''",e:"'''",c:[f],r:10},{cN:"string",b:'(u|b)?r?"""',e:'"""',c:[f],r:10},{cN:"string",b:"(u|r|ur)'",e:"'",c:[a.BE],r:10},{cN:"string",b:'(u|r|ur)"',e:'"',c:[a.BE],r:10},{cN:"string",b:"(b|br)'",e:"'",c:[a.BE]},{cN:"string",b:'(b|br)"',e:'"',c:[a.BE]}].concat([a.ASM,a.QSM]);var e={cN:"title",b:a.UIR};var d={cN:"params",b:"\\(",e:"\\)",c:["self",a.CNM,f].concat(c)};var b={bWK:true,e:":",i:"[${=;\\n]",c:[e,d],r:10};return{k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10",built_in:"None True False Ellipsis NotImplemented"},i:"(</|->|\\?)",c:c.concat([f,a.HCM,a.inherit(b,{cN:"function",k:"def"}),a.inherit(b,{cN:"class",k:"class"}),a.CNM,{cN:"decorator",b:"@",e:"$"},{b:"\\b(print|exec)\\("}])}}(hljs);hljs.LANGUAGES.sql=function(a){return{cI:true,c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma|grant)\\b(?!:)",e:";",eW:true,k:{keyword:"all partial global month current_timestamp using go revoke smallint indicator end-exec disconnect zone with character assertion to add current_user usage input local alter match collate real then rollback get read timestamp session_user not integer bit unique day minute desc insert execute like ilike|2 level decimal drop continue isolation found where constraints domain right national some module transaction relative second connect escape close system_user for deferred section cast current sqlstate allocate intersect deallocate numeric public preserve full goto initially asc no key output collation group by union session both last language constraint column of space foreign deferrable prior connection unknown action commit view or first into float year primary cascaded except restrict set references names table outer open select size are rows from prepare distinct leading create only next inner authorization schema corresponding option declare precision immediate else timezone_minute external varying translation true case exception join hour default double scroll value cursor descriptor values dec fetch procedure delete and false int is describe char as at in varchar null trailing any absolute current_time end grant privileges when cross check write current_date pad begin temporary exec time update catalog user sql date on identity timezone_hour natural whenever interval work order cascade diagnostics nchar having left call do handler load replace truncate start lock show pragma exists number",aggregate:"count sum min max avg"},c:[{cN:"string",b:"'",e:"'",c:[a.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[a.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[a.BE]},a.CNM]},a.CBLCLM,{cN:"comment",b:"--",e:"$"}]}}(hljs);hljs.LANGUAGES.ini=function(a){return{cI:true,i:"[^\\s]",c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:true,k:"on off true false yes no",c:[a.QSM,a.NM]}]}]}}(hljs);hljs.LANGUAGES.perl=function(e){var a="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when";var d={cN:"subst",b:"[$@]\\{",e:"\\}",k:a,r:10};var b={cN:"variable",b:"\\$\\d"};var i={cN:"variable",b:"[\\$\\%\\@\\*](\\^\\w\\b|#\\w+(\\:\\:\\w+)*|[^\\s\\w{]|{\\w+}|\\w+(\\:\\:\\w*)*)"};var f=[e.BE,d,b,i];var h={b:"->",c:[{b:e.IR},{b:"{",e:"}"}]};var g={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5};var c=[b,i,e.HCM,g,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:true},h,{cN:"string",b:"q[qwxr]?\\s*\\(",e:"\\)",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\[",e:"\\]",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\{",e:"\\}",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\|",e:"\\|",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\<",e:"\\>",c:f,r:5},{cN:"string",b:"qw\\s+q",e:"q",c:f,r:5},{cN:"string",b:"'",e:"'",c:[e.BE],r:0},{cN:"string",b:'"',e:'"',c:f,r:0},{cN:"string",b:"`",e:"`",c:[e.BE]},{cN:"string",b:"{\\w+}",r:0},{cN:"string",b:"-?\\w+\\s*\\=\\>",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"("+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,g,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bWK:true,e:"(\\s*\\(.*?\\))?[;{]",k:"sub",r:5},{cN:"operator",b:"-\\w\\b",r:0}];d.c=c;h.c[1].c=c;return{k:a,c:c}}(hljs);hljs.LANGUAGES.json=function(a){var e={literal:"true false null"};var d=[a.QSM,a.CNM];var c={cN:"value",e:",",eW:true,eE:true,c:d,k:e};var b={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:true,eE:true,c:[a.BE],i:"\\n",starts:c}],i:"\\S"};var f={b:"\\[",e:"\\]",c:[a.inherit(c,{cN:null})],i:"\\S"};d.splice(d.length,0,b,f);return{c:d,k:e,i:"\\S"}}(hljs);hljs.LANGUAGES.cpp=function(a){var b={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long throw volatile static protected bool template mutable if public friend do return goto auto void enum else break new extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr"};return{k:b,i:"</",c:[a.CLCM,a.CBLCLM,a.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},a.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:b,r:10,c:["self"]}]}}(hljs);
</script><script>hljs.initHighlightingOnLoad();</script><title>DevFest Web Development Track.md</title></head><body><a href="https://github.com/RaymondXu/devfest-webdev-track.git"><img class="github" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a><p><a id="top"></a></p>
<h1 id="devfest-web-development-track">DevFest Web Development Track</h1>
<p><em>Learn web development by building a reading list app with Flask.</em></p>
<p>Written and developed by <a href="http://www.raymondxu.io">Raymond Xu</a>, <a href="http://mattpic.com">Matt Piccolella</a>, <a href="http://schlosser.io">Dan Schlosser</a>, and <a href="http://www.adicu.com">ADI</a>.</p>
<p><a href="#top" class="top" id="getting-started">Top</a></p>
<h1 id="about-this-document">About This Document</h1>
<h2 id="methodology">Methodology</h2>
<p>This guide will teach you fundamental concepts of web development by guiding you through the process of building a reading list app. We will begin by setting up a basic webpage in Flask, and then we'll incrementally add features level by level. After finishing this tutorial, you will have built a fully-functional reading list app that allows you to save a list of favorite books for each of your users.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Basic knowledge of the Python programming language is suggested. If you don't already know Python, check out <a href="http://learn.adicu.com/python/">this ADI-developed tutorial</a>. No knowledge of HTML, CSS or Flask is expected or required.</p>
<p><a href="#top" class="top" id="table-of-contents">Top</a></p>
<h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li><a href="#level0">Level 0: Environment Setup</a></li>
<li><a href="#level1">Level 1: Making Web Pages: Flask and HTML</a><ul>
<li><a href="#what-is-flask">1.1 What is Flask</a><ul>
<li><a href="#how-a-flask-app-works">1.1.1 How a Flask App Works</a></li>
<li><a href="#the-anatomy-of-a-flask-app">1.1.2 The Anatomy of a Flask App</a></li>
</ul>
</li>
<li><a href="#hello-world-in-flask">1.2 Hello World</a><ul>
<li><a href="#editing-app-py">1.2.1 Editing <code>app.py</code></a></li>
<li><a href="#running-a-flask-app">1.2.2 Running a Flask App</a></li>
<li><a href="#developing-with-flask">1.2.3 Developing with Flask</a></li>
</ul>
</li>
<li><a href="#working-with-routes">1.3 Working with Routes</a><ul>
<li><a href="#static-routes">1.3.1 Static Routes</a></li>
<li><a href="#dynamic-routes">1.3.2 Dynamic Routes</a></li>
</ul>
</li>
<li><a href="#html-basics">1.4 HTML Basics</a><ul>
<li><a href="#what-is-html">1.4.1 What is HTML</a></li>
<li><a href="#anatomy-of-an-html-document">1.4.2 Anatomy of an HTML Document</a></li>
<li><a href="#an-overview-of-common-tags">1.4.3 An Overview of Common Tags</a></li>
<li><a href="#a-simple-example-hello-html">1.4.4 The Landing Page</a></li>
<li><a href="#the-search-page">1.4.5 The Search Page</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level2">Level 2: Styling our App: CSS</a><ul>
<li><a href="#css-basics">2.1 CSS Basics</a><ul>
<li><a href="#applying-css-styles">2.1.1 Applying CSS Styles</a></li>
<li><a href="#selectors">2.1.2 Selectors</a></li>
<li><a href="#basic-properties-and-values">2.1.3 Basic Properties and Values</a></li>
</ul>
</li>
<li><a href="#external-libraries">2.2 External Libraries</a><ul>
<li><a href="#using-foundation">2.2.1 Using Foundation</a></li>
<li><a href="#installation-and-template-setup">2.2.2 Installation and Template Setup</a></li>
</ul>
</li>
<li><a href="#adding-css-to-our-project">2.3 Adding CSS to our Project</a></li>
</ul>
</li>
<li><a href="#level3">Level 3: Adding Search Functionality: APIs</a><ul>
<li><a href="#api-basics">3.1 API Basics</a><ul>
<li><a href="#rest-apis">3.1.1 REST APIs</a></li>
<li><a href="#the-anatomy-of-a-url">3.1.2 The Anatomy of a URL</a></li>
<li><a href="#data-in-json">3.1.3 Data in JSON</a></li>
<li><a href="#viewing-json-in-the-browser">3.1.4 Viewing JSON in the Browser</a></li>
<li><a href="#http">3.1.5 Extension: HTTP</a></li>
</ul>
</li>
<li><a href="#google-books-api">3.2 Google Books API</a><ul>
<li><a href="#determining-the-request-url">3.2.1 Determining the Request URL</a></li>
<li><a href="#using-curl">3.2.2 Using cURL</a></li>
<li><a href="#using-python">3.2.3 Using Python</a></li>
<li><a href="#using-flask-extending-the-search-route">3.2.4 Using Flask: Extending the Search Route</a></li>
<li><a href="#using-javascript">3.2.5 Extension: Using JavaScript</a></li>
</ul>
</li>
<li><a href="#displaying-search-results">3.3 Displaying Search Results</a><ul>
<li><a href="#template-variables-using-jinja2">3.3.1 Template Variables Using Jinja2</a></li>
<li><a href="#extending-templates">3.3.2 Extending Templates</a></li>
<li><a href="#base-templates-and-style">3.3.3 Base Templates and Style</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level4">Level 4: Storing Favorites: Databases</a><ul>
<li><a href="#mongo-db">4.1 Using MongoDB</a><ul>
<li><a href="#what-mongo">4.1.1 What is MongoDB?</a></li>
<li><a href="#flask-mongo">4.1.2 Using Flask-Mongoengine</a></li>
</ul>
</li>
<li><a href="#model">4.2 Adding a Model</a><ul>
<li><a href="#fav-book">4.2.1 Creating a <code>FavoriteBook</code> Model</a></li>
<li><a href="#create-save">4.2.2 Creating and Saving Objects</a></li>
</ul>
</li>
<li><a href="#view-fav">4.3 Viewing Favorites</a><ul>
<li><a href="#query-obj">4.3.1 Querying for Objects</a></li>
<li><a href="#list-obj">4.3.2 Presenting a List of Favorites</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level5">Level 5: Adding User-Specific Favorites: Sessions &amp; Accounts</a><ul>
<li><a href="#flask-login">5.1 Using <code>Flask-Login</code></a><ul>
<li><a href="#install-login">5.1.1 Installing <code>Flask-Login</code></a></li>
<li><a href="#user_obj">5.1.2 Creating a User Object</a></li>
<li><a href="#user_loader">5.1.3 Adding the <code>user_loader</code></a></li>
</ul>
</li>
<li><a href="#register_login">5.2 Handling Registration and Login</a><ul>
<li><a href="#wtforms">5.2.1 Create a <code>UserForm</code> with WTForms</a></li>
<li><a href="#register">5.2.2 Creating a Registration Page</a></li>
<li><a href="#login">5.2.3 Creating a Login Page</a></li>
<li><a href="#logout">5.2.4 Adding Logout</a></li>
<li><a href="#homepage-but">5.2.5 Adding Home Page Buttons</a></li>
</ul>
</li>
<li><a href="#personal-favs">5.3 Personalizing Favorites</a><ul>
<li><a href="#login_required">5.3.1 Using <code>@login_required</code></a></li>
<li><a href="#add_user_fav">5.3.2 Adding <code>User</code> to <code>FavoriteBook</code></a></li>
<li><a href="#change_fav_page">5.3.3 Changing our Favorites Page</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<p><a href="#top" class="top" id="level0">Top</a></p>
<h1 id="level-0-environment-setup">Level 0: Environment Setup</h1>
<p>Before we get started, set up your environment using <a href="http://learn.devfe.st/setup/">this guide</a>.</p>
<p><a href="#top" class="top" id="level1">Top</a></p>
<h1 id="level-1-making-web-pages-flask-and-html">Level 1: Making Web Pages: Flask and HTML</h1>
<p>Let's begin by creating the landing page for our reading list app. This will simply be the introductory screen for our app that will brief our users about what the app is for. Before we do so, we need to learn about Flask.</p>
<p><a href="#top" class="top" id="what-is-flask">Top</a></p>
<h2 id="11-what-is-flask">1.1 What is Flask</h2>
<p><a href="http://flask.pocoo.org/">Flask</a> is a Python microframework.  Microframeworks are bare-bones, customizable tools that make it easy to build web apps. Flask lets us do this in Python.  It is very easy to setup and has excellent documentation on its <a href="http://flask.pocoo.org/">website</a>; feel free to dig around! There's lots of awesome stuff to read about on their site.</p>
<p><a id="how-a-flask-app-works"></a></p>
<h3 id="111-how-a-flask-app-works">1.1.1 How a Flask App Works</h3>
<p>Flask works with a <a href="http://en.wikipedia.org/wiki/Client%E2%80%93server_model">client-server model</a>.  The server, written in Python, has functions that take requests from clients (i.e. web browsers) and return web content to be displayed by the client.  </p>
<p>Think about it like a restaurant:  The patron (the client, or web browser) gets their meal (the web page) by telling it to the waiter (the Flask server). Then, depending on the order (the request), the waiter gives it to the cook (back-end functions, optional) and then the server returns the cooked meal to the patron. </p>
<p>In addition to serving static pages (meals off the menu), Flask servers have the ability of serving <a href="http://en.wikipedia.org/wiki/Dynamic_content">dynamic web pages</a>, or pages that are generated every time you load the page (made to order).  Dynamic content could include information stored in a database or a user account. For example, when you open Facebook, the news feed is different depending on who's account you are on and what posts your friends have shared.</p>
<p><a id="the-anatomy-of-a-flask-app"></a></p>
<h3 id="112-the-anatomy-of-a-flask-app">1.1.2 The Anatomy of a Flask App</h3>
<p>This is a very basic directory structure for a Flask webapp.</p>
<pre><code>ProjectDirectory/
├── app.py
├── requirements.txt
├── static/
│   ├── css/
│   ├── img/
│   └── js/
└── templates/
</code></pre>
<ul>
<li><code>ProjectDirectory/</code> - Everything for your app goes in this folder.  Rename this to the name of your app, so maybe <code>reading-list</code>, in our case.</li>
<li><code>app.py</code> - All of the Python/Flask code and server logic gets written in this file.</li>
<li><code>requirements.txt</code> - A list of all of the dependencies for your project.  See more about dependencies and installing them in <a href="http://adicu.com/intro-webdev/python/#pip">section 6.3 of our Python tutorial</a>.</li>
<li><code>static/</code> - This folder holds all your static files.  Static files include:<ul>
<li><code>js/</code> - Javascript files, which allow interactive web content. We'll talk about these <a href="#using-javascript">later</a>.</li>
<li><code>css/</code> - CSS files, which style our app.  We'll talk about these <a href="#level2">later</a> too.</li>
<li><code>img/</code> - Image files.</li>
</ul>
</li>
<li><code>templates/</code> - This folder holds all your Flask templates.  Our HTML files will go here.  There are special features offered by Flask that make templates different than basic HTML files, explored in <a href="#displaying-search-results">Section 3.3</a>.</li>
</ul>
<p><a href="#top" class="top" id="hello-world-in-flask">Top</a></p>
<h2 id="12-hello-world-in-flask">1.2 Hello World in Flask</h2>
<p>Download the starter code for level 1 <a href="https://github.com/RaymondXu/devfest-webdev-track-code/tree/level1">here</a>. Click on the green button that says "Clone or Download" and then click "Download ZIP", and then unzip the downloaded file. You should now have a directory on your computer called <code>devfest-webdev-track-code</code>. Let's rename the directory to <code>reading-list-app</code>. For the rest of the tutorial, we'll assume that you're inside of your <code>virtualenv</code> virtual environment and editing your code with Sublime Text.</p>
<p>As a refresher, here's a set of steps you can follow to quickly set up your development environment (all the packages you'll need) safely in a virtual environment:</p>
<pre><code>cd reading-list-app
virtualenv venv
source venv/bin/activate
sudo pip install -r requirements.txt
</code></pre>

<p>or, if you're on a PC:</p>
<pre><code>cd reading-list-app
virtualenv venv
venv\Scripts\activate
pip install -r requirements.txt
</code></pre>

<p>As we mentioned back in <strong>Level 0: Environment Setup</strong>, we can painlessly install packages into our virtual environment by asking <code>pip</code> to install from a list of packages. That list is <code>requirements.txt</code>, and conveniently prevents you from having to install each package individually. Isn't that great?</p>
<p>In order to write our first Flask app, we only need to edit one file: <code>app.py</code>.  It's that easy!</p>
<p><a id="editing-app-py"></a></p>
<h3 id="121-editing-apppy">1.2.1 Editing <code>app.py</code></h3>
<p>First, import the <code>Flask</code> class from the <code>flask</code> module.</p>
<pre><code class="python">from flask import Flask
</code></pre>

<p>Then, construct the Flask <code>app</code> variable.  We'll pass around this variable whenever we want to access information about the server. We pass <code>__name__</code> into the <code>Flask()</code> function so that your flask app is associated with the directory structure we created in <a href="#the-anatomy-of-a-flask-app">Section 1.1</a>.</p>
<pre><code class="python">app = Flask(__name__)
</code></pre>

<p>Next, apply the <code>@app.route("/")</code> <a href="https://wiki.python.org/moin/PythonDecorators">decorator</a> to a function called <code>hello()</code>.  It returns just the string <code>"Hello World!"</code>.  By doing this, we are making a <a href="http://flask.pocoo.org/docs/quickstart/#routing">route</a>.  The <code>route()</code> decorator binds the URL <code>http://yourwebapp.com/</code> to this function, effectively adding a new page to your app.  Functions with the <code>route()</code> decorator can return text strings or HTML, and whatever is returned will be displayed by the client. </p>
<pre><code class="python">@app.route(&quot;/&quot;)
def hello():
    return &quot;Hello World!&quot;
</code></pre>

<p>Finally, call <code>app.run(host="0.0.0.0")</code> when the file is executed.  Once <code>app.run(host="0.0.0.0")</code> is called, the server will start accepting requests from the client.</p>
<pre><code class="python">if __name__ == &quot;__main__&quot;:
    app.run(host=&quot;0.0.0.0&quot;)
</code></pre>

<p>This leaves us with a completed Hello World program in Flask:</p>
<pre><code class="python">from flask import Flask

app = Flask(__name__)

@app.route(&quot;/&quot;)
def hello():
    return &quot;Hello World!&quot;

if __name__ == &quot;__main__&quot;:
    app.run(host=&quot;0.0.0.0&quot;)
</code></pre>

<p><a id="running-a-flask-app"></a></p>
<h3 id="122-running-a-flask-app">1.2.2 Running a Flask App</h3>
<p>To run our Hello World app, just type the following command in the Project Directory folder:</p>
<pre><code class="bash">$ python app.py
</code></pre>

<p>If it's working, it should print the lines:</p>
<pre><code class="bash">* Running on http://0.0.0.0:5000/
</code></pre>

<p>Point your browser to that URL and bask in the awesomeness!</p>
<blockquote>
<p>Wondering what that weird URL is?  <code>0.0.0.0</code> lets all public IPs connect to the server.  When we run a Flask server with <code>python app.py</code>, it is running only on your machine, not the internet.  The <code>:5000</code> bit is the <a href="http://en.wikipedia.org/wiki/Port_(computer_networking)">port</a>, or specific place where your app is running.  Developing locally is much easier and safer than publishing your app to the internet every time you want to test something, and is considered good practice.  Also, instead of typing out <code>http://0.0.0.1:5000</code> every time you want to see your app, you can also point your browser to <code>http://localhost:5000</code>. Try it out!</p>
</blockquote>
<p><a id="developing-with-flask"></a></p>
<h3 id="123-developing-with-flask">1.2.3 Developing with Flask</h3>
<p>Flask is great for development.  It offers very helpful error messages and prints stack traces well in the browser, if instructed to.  To enable these debugging features and (more importantly) automatic reload, edit <code>app.py</code> and add a statement configuring the <code>app</code> object.</p>
<pre><code class="python">from flask import Flask

app = Flask(__name__)
app.config[&quot;DEBUG&quot;] = True  # Only include this while you are testing your app

@app.route(&quot;/&quot;)
def hello():
    return &quot;Hello World!&quot;

if __name__ == &quot;__main__&quot;:
    app.run(host=&quot;0.0.0.0&quot;)
</code></pre>

<p>With this modification, edit the string returned by the <code>hello()</code> function and refresh your browser to watch it change!  When you run the server now, it should also print:</p>
<pre><code>* Restarting on reloader
</code></pre>
<p><a href="#top" class="top" id="working-with-routes">Top</a></p>
<h2 id="13-working-with-routes">1.3 Working with Routes</h2>
<p>Let's define a few more routes for our app. Again, <a href="http://flask.pocoo.org/docs/quickstart/#routing">routes</a> are paths that can be visited by the user of the app. We use the <a href="https://wiki.python.org/moin/PythonDecorators">decorator</a> <code>app.route("/somepath")</code> to tie the decorated function to the path given in the parenthesis.</p>
<p><a id="static-routes"></a></p>
<h3 id="131-static-routes">1.3.1 Static Routes</h3>
<p>First, lets make a route that lets the client get the name of the creator of this app.  Start by defining a function called <code>name()</code>, and have it return your name as a string.</p>
<pre><code class="python">def name():
  return &quot;Your Name&quot;
</code></pre>

<p>Now we'll apply the decorator <code>app.route()</code>.  Inside the parenthesis for the decorator, include the path <code>"/name"</code>.  Paths in Flask always start with a <code>/</code>.</p>
<pre><code class="python">@app.route(&quot;/name&quot;)
def name():
  return &quot;Your Name&quot;
</code></pre>

<p>Save.  With your server <a href="#running-a-flask-app">running</a> or <a href="#developing-with-flask">reloaded</a>,  point your browser to <code>"http://localhost:5000/name"</code> and your name will appear!  Our <code>/name</code> route is static, because it returns the same string every time.</p>
<p>Now, as an exercise, make another static route accessible at <code>http://localhost:5000/website</code> that returns the URL of your personal website or favorite website (don't forget the <code>http://</code>!).</p>
<p><a id="dynamic-routes"></a></p>
<h3 id="132-dynamic-routes">1.3.2 Dynamic Routes</h3>
<p>Dynamic routes are what make using Flask so valuable.  Start off by making a static route called <code>search</code>.  It can return any string you want.  We'll edit it to return the results of our web search.</p>
<pre><code class="python">@app.route(&quot;/search&quot;)
def search():
  return &quot;Search&quot;
</code></pre>

<p>To make our route dynamic, first we will modify the url to take a variable parameter named <code>search_query</code>.</p>
<pre><code class="python">@app.route(&quot;/search/&lt;search_query&gt;&quot;)
</code></pre>

<p>Then, modify the <code>search</code> function to take a string variable <code>search_query</code>, and return that.</p>
<pre><code class="python">@app.route(&quot;/search/&lt;search_query&gt;&quot;)
def search(search_query):
  return search_query
</code></pre>

<p>Save and reload your server as needed, and navigate to <code>http://localhost:5000/search/test</code> and see <code>test</code> appear as the returned page.  If you change what comes after the <code>/search/</code> in the URL, it will be displayed in the browser.  We will soon modify this route to return actual search results.</p>
<p><a href="#top" class="top" id="html-basics">Top</a></p>
<h2 id="14-html-basics">1.4 HTML Basics</h2>
<p>Now that we've covered basic routes in Flask, we can take a look at HTML.</p>
<p><a id="what-is-html"></a></p>
<h3 id="141-what-is-html">1.4.1 What is HTML</h3>
<p><a href="http://en.wikipedia.org/wiki/HTML/">HTML</a>, or HyperText Markup Language is the main lanugage we use for creating content that will be displayed by a browser.  So what is HTML?  Well, at the very core, it's text.  Create a file in your working directory, and call it <code>hello.html</code>.  Inside it, just type:</p>
<pre><code class="html">Hello World!
</code></pre>

<p>No funny business, just the two words.  If you open <code>hello.html</code> in your browser, you'll see it display <code>Hello World!</code>.  Congratulations on writing your first HTML document! Every text document can be interpreted as an HTML document (just add the <code>.html</code> extension!), but true HTML documents organize themselves in a structured way, using <em>elements</em>.</p>
<h4 id="elements">Elements</h4>
<p>Elements are made up of the <em>start tag</em>, the <em>content</em>, and the <em>end tag</em> (or <em>closing tag</em>). Both the start and end tags are wrapped in angle brackets (<code>&lt; &gt;</code>), and contain the element name inside them.  The end tag has slash (<code>/</code>) that immediately follows the open angle bracket.  Content of elements can be plain text, or even more HTML. Copy this example element into <code>hello.html</code>, and view it in your browser:</p>
<pre><code class="html">Hello World!

&lt;p&gt;This is a really cool paragraph&lt;/p&gt;
</code></pre>

<p>The start tag is <code>&lt;p&gt;</code>, the content is <code>This is a really cool paragraph</code>, and the end tag is <code>&lt;/p&gt;</code>.  The element name in this case is <code>p</code>, for paragraph.  Because the content of an element can be HTML, we can nest tags inside each other.  So for example, if we wanted to <strong>em</strong>phasize that the paragraph is cool, we could wrap the words "really cool" in <code>&lt;em&gt;</code> tags, like this:</p>
<pre><code class="html">Hello World!
&lt;p&gt;This is a &lt;em&gt;really cool&lt;/em&gt; paragraph&lt;/p&gt;
</code></pre>

<p>Reload <code>hello.html</code>.  You'll probably see the words "really cool" italics.  Now lets say we want to put even <strong>strong</strong>er emphasis on the word "really". We can use the <code>&lt;strong&gt;</code> tag for that.  Edit <code>hello.html</code>:</p>
<pre><code class="html">Hello World!
&lt;p&gt;This is a &lt;em&gt;&lt;strong&gt;really&lt;/strong&gt; cool&lt;/em&gt; paragraph&lt;/p&gt;
</code></pre>

<p>If you reload <code>hello.html</code>, you should see that "really cool" is in italics, and "really" is also in bold.  Does that mean the the <code>&lt;em&gt;</code> is used to make words italic and <code>&lt;strong&gt;</code> is used to make them bold?  No.  Most web browsers have agreed that emphasis should be expressed using italics, and strong emphasis should be expressed with bold font, but as writers of HTML, we use tags to describe the purpose of the content, not to achieve the format that we see once they're applied.</p>
<h4 id="headings">Headings</h4>
<p>One rule of thumb for writing good HTML:  All text should be wrapped in tags, and the tags should be meaningful.  Right now, our <code>Hello World!</code> text has no tags around it, so let's figure out what tag makes the most sense.  "Hello World!" is the title of our <code>hello.html</code> web page, so we'll use the heading tags to indicate this.  The <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code>, <code>&lt;h4&gt;</code>, <code>&lt;h5&gt;</code>, and <code>&lt;h6&gt;</code> tags are used for headings and subheadings, <code>&lt;h1&gt;</code> being the highest level (and usually the largest), and <code>&lt;h6&gt;</code> being the lowest level (and usually the smallest).  Let's wrap our page title in <code>&lt;h1&gt;</code> tags.</p>
<pre><code class="html">&lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;p&gt;This is a &lt;em&gt;&lt;strong&gt;really&lt;/strong&gt; cool&lt;/em&gt; paragraph&lt;/p&gt;
</code></pre>

<p>Reload <code>hello.html</code> and see the <code>&lt;h1&gt;</code> tag in action!  You might have an instinct to mess around with the different headings 1-6, and you should go ahead!  But remember this, we chose <code>&lt;h1&gt;</code> because "Hello World!" was the title of our webpage, not because we wanted it to be large.  So as you switch the <code>&lt;h1&gt;</code> tags to <code>&lt;h2&gt;</code>, remember that it wouldn't really make any sense to include an <code>&lt;h2&gt;</code> element in a website without an <code>&lt;h1&gt;</code> element, because that would mean a subheading without a heading.  From <code>&lt;h2&gt;</code> and down, headings should be interchanged depending on their importance.</p>
<h4 id="attributes">Attributes</h4>
<p>HTML elements can also have <a href="http://en.wikipedia.org/wiki/HTML_attribute">attributes</a>.  Attributes are key-value pairs that modify the contents of HTML elements, or provide additional information about the element itself.  For example, when we use the <code>&lt;a&gt;</code> tag to create an <strong>a</strong>nchor, or hyperlink, we have to provide the destination in the <code>href</code> attribute.  Edit <code>hello.html</code>:</p>
<pre><code class="html">&lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;p&gt;This is a &lt;em&gt;&lt;strong&gt;really&lt;/strong&gt; cool&lt;/em&gt; paragraph.  My favorite search engine is &lt;a href=&quot;http://www.google.com&quot;&gt;Google&lt;/a&gt;&lt;/p&gt;
</code></pre>

<p>The <code>href</code> is the key, and then we set it <code>=</code> to the value <code>"http://www.google.com"</code>.  If you reload <code>hello.html</code>, you'll see a blue (or maybe purple), underlined link to google.com on your page!</p>
<blockquote>
<p>Wondering what "href" stands for?  So do we.  It's extremely unclear in the community, and while there is some consensus that it <em>should</em> mean "<strong>H</strong>ypertext <strong>REF</strong>erence", there is still <a href="http://tomayko.com/writings/wtf-is-an-href-anyway">confusion</a>.</p>
</blockquote>
<p><a id="anatomy-of-an-html-document"></a></p>
<h3 id="142-anatomy-of-an-html-document">1.4.2 Anatomy of an HTML Document</h3>
<p>The purpose of HTML documents is to provide a semantic structure that represents the web page that is being displayed.  When talking about HTML, semantic means that all the tags are used for the appropriate purposes, and that all necessary information is included in the HTML source code.</p>
<p>In this section, we'll dissect a boilerplate HTML document that follows HTML5 (the most modern) standards that help ensure that your HTML is rendered as best as possible by all devices and browsers. Here is the document:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;My Website&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;!--Page content--&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The first line is the our file's <a href="http://en.wikipedia.org/wiki/Doctype#HTML5_DTD-less_DOCTYPE">doctype</a>.  according to the HTML specification, the doctype is a "required preamble", but for our purposes, it's just something you should always include.  </p>
<blockquote>
<p>Wondering how we got away with writing an HTML document without a DOCTYPE, or think you're too cool for one?  Read this <a href="http://stackoverflow.com/a/7695075">stack overflow response</a> that summarizes it pretty well.  Use it, or be prepared to feel the pain that may or may not eventually result from such hubris. </p>
</blockquote>
<p>Older HTML standards include a much wordier DOCTYPE tag at the beginning of the document, but we only need:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
</code></pre>

<p>Note that this is not an element, and is just a tag.  There is an <code>!</code> at the beginning of it and there is no closing tag.  This is one of the only cases where this will be true.</p>
<p>Next, we see the line:</p>
<pre><code class="html">&lt;html lang=&quot;en&quot;&gt;
</code></pre>

<p>This the the opening tag of the <code>&lt;html&gt;</code> element.  You can see it's closing tag at the last line.  We use the <code>&lt;html&gt;</code> element as the root for all other elements, by convention.  The <code>lang</code> attribute is used to indicate that the primary language for this document will be English.</p>
<p>Moving inwards to the <em>children</em> of the <code>&lt;html&gt;</code> element, or elements one level within it, we see the <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> elements.  </p>
<p>The <code>&lt;head&gt;</code> element holds all the information about the web page that should not be displayed within the browser window.  The <code>&lt;body&gt;</code> tag holds all the elements that should be displayed.  </p>
<p>Within the <code>&lt;head&gt;</code> element, we first have a <code>&lt;meta&gt;</code> element:</p>
<pre><code class="html">&lt;meta charset=&quot;utf-8&quot;&gt;
</code></pre>

<p>The <code>&lt;meta&gt;</code> element does not have content or a closing tag, tells us extra information about this document.  By default, we indicate that our character set will be <code>utf-8</code>, or unicode.</p>
<p>The next line is more straightforward.</p>
<pre><code class="html">&lt;title&gt;My Website&lt;/title&gt;
</code></pre>

<p>The <code>&lt;title&gt;</code> element tells the browser the name of our website.  If you load this example in your browser, you'll see <code>My Website</code> show up as the title of the page (even though it will have no content in the browser window).</p>
<p>Within the <code>&lt;body&gt;</code> element, all we have is the line:</p>
<pre><code class="html">&lt;!--Page content--&gt;
</code></pre>

<p>Everything wrapped between the <code>&lt;!--</code> and the <code>--&gt;</code> is a comment, and won't show up in the page.  Edit <code>hello.html</code> to reflect the standard HTML5 template.  We can remove the comment.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello World!&lt;/h1&gt;
        &lt;p&gt;This is a &lt;em&gt;&lt;strong&gt;really&lt;/strong&gt; cool&lt;/em&gt; paragraph.  My favorite search engine is &lt;a href=&quot;http://www.google.com&quot;&gt;Google&lt;/a&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>When you reload <code>hello.html</code>, you may not notice any change.  However, constructing our document in this manner will make it more extensible and cross-device compatible.</p>
<p><a id="an-overview-of-common-tags"></a></p>
<h3 id="143-an-overview-of-common-tags">1.4.3 An Overview of Common Tags</h3>
<p>There are many HTML elements that you will use for your website.  There are some basics you should know, before you dive into it, however.  Most of this section is summarized from the <a href="https://developer.mozilla.org/en-US/">Mozilla Developer Network (MDN)</a>, more specifically their <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTML element reference</a>.  </p>
<p><strong>DO NOT SKIM THIS NEXT PARAGRAPH</strong></p>
<p>Please, please, please use MDN.  There is another site, called W3 schools (hyperlink intentionally excluded) that consistently turns up higher in Google search rankings, and consistently has incorrect, outdated, and more confusing information on the same topics.  If you have a question about web development (generally HTML, CSS, or JavaScript), just append "mdn" to the end of your search, to make sure that you get MDN as the top result.  The team at Mozilla has done an excellent job of making an excellent website that has the most up-to-date information about good web development practices. </p>
<h4 id="structure">Structure</h4>
<ul>
<li><code>&lt;html&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html">(MDN)</a> - All HTML should be wrapped in the <code>&lt;html&gt;</code> element.  It should be the only element at the top level of an HTML document (except <code>&lt;DOCTYPE&gt;</code>).</li>
<li><code>&lt;body&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body">(MDN)</a> - Represents the content of the HTML document.  All visible elements are descendant from the <code>&lt;body&gt;</code> tag.</li>
<li><code>&lt;head&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head">(MDN)</a> - Holds all the metadata about the document.  This could include the title, charset, styling, and scripts</li>
<li><code>&lt;div&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div">(MDN)</a> - A general purpose container, to be used when no other element has semantic meaning.  Using <a href="#css">CSS</a>, <code>&lt;div&gt;</code> elements can be made to server all sorts of stylistic purposes.  There are <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">a lot of elements</a> to choose from, so be sure that nothing else fits before using a <code>&lt;div&gt;</code>.  That said, you will find that you end up using <code>&lt;div&gt;</code> elements with some frequency.</li>
<li><code>&lt;span&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span">(MDN)</a> - Another general purpose container, but specifically for inline content.  For example, if you want to highlight misspelled words in a page, wrapping them in a span that has been configured to highlight its content would be the best solution.  Don't use a <code>&lt;div&gt;</code> when a <code>&lt;span&gt;</code> would be more appropriate.</li>
</ul>
<h4 id="text">Text</h4>
<ul>
<li><code>&lt;p&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/p">(MDN)</a> - A paragraph of text.  </li>
<li><code>&lt;a&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a">(MDN)</a> - A link, or anchor.  Be sure to always include the <code>href</code> attribute when using <code>&lt;a&gt;</code> tags.  If a link doesn't go anywhere, set the <code>href</code> attribute equal to <code>"#"</code>.</li>
<li><code>&lt;h1&gt; - &lt;h6&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h1">(MDN)</a> - Headers of various levels, <code>&lt;h1&gt;</code> being the highest level (like the title of an article or the title of the page), and <code>&lt;h6&gt;</code> being the most low level heading.  For <a href="https://en.wikipedia.org/wiki/Search_engine_optimization">Search Engine Optimization (SEO)</a> reasons, you should only include on <code>&lt;h1&gt;</code> tag on every page.</li>
<li><code>&lt;em&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/em">(MDN)</a> - Emphasis.  While on many browsers this will make text italic, do not use <code>&lt;em&gt;</code> elements for only this purpose.  Only use emphasis tags when words need emphasis.</li>
<li><code>&lt;strong&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/strong">(MDN)</a> - Strong emphasis.  Usage rules are similar for the <code>&lt;em&gt;</code> element.</li>
<li><code>&lt;br&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br">(MDN)</a> - For line breaks.  Using <code>&lt;br&gt;</code> tags is only really appropriate when writing a poem, address, or something else where line breakage is important.  Don't use this for the space between two paragraphs (just use two <code>&lt;p&gt;</code> tags!).</li>
</ul>
<h4 id="lists">Lists</h4>
<ul>
<li><code>&lt;ol&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ol">(MDN)</a> - An ordered list.  Ordered lists should only contain list items (<code>&lt;li&gt;</code> elements).  Only use an <code>&lt;ol&gt;</code> when the order of the items in the list matters, like a recipe or instructions.</li>
<li><code>&lt;ul&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul">(MDN)</a> - An unordered list.  Unordered lists should also only contain list items (<code>&lt;li&gt;</code> elements).  Use this when you have a list of similar items, but the order does not matter.  </li>
<li><code>&lt;li&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li">(MDN)</a> - An item in a <code>&lt;ul&gt;</code> or an <code>&lt;ol&gt;</code>.</li>
</ul>
<h4 id="forms">Forms</h4>
<ul>
<li><code>&lt;form&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form">(MDN)</a> - A wrapper for any form that the user will fill out on the page. If you are making a web form, check out <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/My_first_HTML_form?redirectlocale=en-US&amp;redirectslug=HTML%2FForms%2FMy_first_HTML_form">this instructional guide</a> from MDN on how to build a basic form.</li>
<li><code>&lt;input&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">(MDN)</a> - An element that is used to input data into a form.  This could be a text-box, radio button, or an email address box depending on the attributes used.  Input tags are self closing, meaning that they don't have content or an end tag, and just take the form <code>&lt;input /&gt;</code>.</li>
<li><code>&lt;label&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label">(MDN)</a> - A piece of text that labels an input.</li>
<li><code>&lt;textarea&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea">(MDN)</a> - A large, multiline text box that is part of a form.</li>
<li><code>&lt;button&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button">(MDN)</a> - Used for a button that submits or resets the form.</li>
</ul>
<h4 id="meta-informational">Meta / Informational</h4>
<p>Except the <code>&lt;DOCTYPE&gt;</code> tag, all of these elements should be children of the <code>&lt;head&gt;</code>.</p>
<ul>
<li><code>&lt;DOCTYPE&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Introduction_to_HTML5#Declaring_that_the_document_contains_HTML5_mark-up_with_the_HTML5_doctype">(MDN)</a> - The declaration of the document type.</li>
<li><code>&lt;meta&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta">(MDN)</a> - Provides extra information about the document.  The <code>&lt;meta</code>&gt; tag may serve a bunch of different purposes depending on its attributes.</li>
<li><code>&lt;link&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link">(MDN)</a> - Linking this document to an external resource.  For the most part, the <code>&lt;link&gt;</code> tag is only used for linking to an external CSS file.  We'll learn more about this syntax in <a href="#css-basics">section 2.1</a>.  Be sure to always include the <code>href</code>, <code>rel</code>, <code>type</code>, and <code>media</code> attributes, as follows: </li>
</ul>
<pre><code class="html">&lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot;&gt;
</code></pre>

<ul>
<li><code>&lt;style&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style">(MDN)</a> - Embedded CSS style.  While it is better practice to use <code>&lt;link&gt;</code> to an external CSS file, it is also possible to include CSS content in a <code>&lt;style&gt;</code> element.</li>
<li><code>&lt;title&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title">(MDN)</a> - The title of your page.</li>
</ul>
<h4 id="other">Other</h4>
<ul>
<li><code>&lt;img&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img">(MDN)</a> - Used to include an image on the page.  Always include the <code>src</code> attribute, the URL of the image resource, and the <code>alt</code> attribute to describe the image if for some reason the image cannot or should not be loaded.  The <code>&lt;img&gt;</code> element is self closing, like the <code>&lt;input&gt;</code> element.  We write it in the form <code>&lt;img /&gt;</code>.  For example:</li>
</ul>
<pre><code class="html">&lt;img src=&quot;https://developer.cdn.mozilla.net/media/img/mdn-logo-sm.png&quot; alt=&quot;MD Logo&quot; /&gt;
</code></pre>

<ul>
<li><code>&lt;script&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">(MDN)</a> - Use to either embed JavaScript (in rare occasions) or link to external JavaScript file (more common).  Always include the <code>type</code> attribute, and include the <code>src</code> attribute if the file is external.  Here is an example of the two different styles of using the <code>&lt;script&gt;</code> element:</li>
</ul>
<pre><code class="html">&lt;script type=&quot;text/javascript&quot; src=&quot;my_script.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    console.log('Hello Console!');
    alert('Hello World!');
&lt;/script&gt;
</code></pre>

<p><a id="a-simple-example-hello-html"></a></p>
<h3 id="144-the-landing-page">1.4.4 The Landing Page</h3>
<p>Let's turn <code>hello.html</code> into the landing page for our app! Replace its contents with this:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Reading List App&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Reading List App&lt;/h1&gt;
        &lt;p&gt;This web app allows users to search for books and add them to their reading lists!&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Flask uses something called templates to make writing HTML more modular. We will go in-depth on templating in <a href="#displaying-search-results">a later section</a>, but let's set up a simple HTML page here. Let's make our Flask app return <code>hello.html</code> as a template.  First,  move <code>hello.html</code> into the <code>templates</code> folder.  Then, in <code>app.py</code>, import <code>render_template</code> from the <code>flask</code> package:</p>
<pre><code class="python">from flask import Flask, render_template
import requests
...
</code></pre>

<p>The function <code>render_template()</code> turns templates in your <code>templates</code> folder into HTML that can be sent to the client.</p>
<p>Now for our <code>/</code> route, we'll return the string that is created by calling <code>render_template()</code> on the name of the template file.</p>
<pre><code class="python">...
@app.route(&quot;/&quot;)
def hello():
    return render_template(&quot;hello.html&quot;)
...
</code></pre>

<p>Reload the server and visit <code>localhost:5000</code>.  You'll see <code>hello.html</code>, but this time rendered by Flask!</p>
<p><img alt="hello.html" src="/webdev/img/level1_hello.png" /></p>
<p><a id="the-search-page"></a></p>
<h3 id="145-the-search-page">1.4.5 The Search Page</h3>
<p>Now let's write the web page where users can search for books!</p>
<p>First start by creating a file called <code>search.html</code> in the <code>/templates</code> folder like such:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Search&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;!--Page content--&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The first thing we should do is add a title to the search page. We'll use <code>&lt;h1&gt;</code> because this will be the top level heading.</p>
<pre><code class="html">...
&lt;body&gt;
    &lt;h1&gt;Search&lt;/h1&gt;
&lt;/body&gt;
...
</code></pre>

<p>Now, let's create a web form that allows users to enter a search query and click a button to execute the search.  We'll make a very simple search form (following guidelines from <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/My_first_HTML_form?redirectlocale=en-US&amp;redirectslug=HTML%2FForms%2FMy_first_HTML_form">MDN</a>).  Start with a <code>&lt;form&gt;</code> element.  We fill out the <code>action</code> and <code>method</code> attributes in accordance with HTML5 standards.</p>
<pre><code class="html">...
&lt;h1&gt;Search&lt;/h1&gt;
&lt;form action=&quot;/search&quot; method=&quot;post&quot;&gt;
&lt;/form&gt;
...
</code></pre>

<p>Next we'll add an <code>&lt;input&gt;</code> method with <code>type</code> attribute equal to <code>text</code>, in order to make a text field.  We'll add placeholder text using the <code>placeholder</code> attribute, to cue in users as to how to use the form.  We also include the <code>name</code> attribute, which lets us standardize how the data from the form will be sent to our Flask server.  Finally, add the attribute <code>required</code> (it does not take a value).  This ensures that we don't submit the form when the text box is empty.</p>
<pre><code class="html">...
&lt;form action=&quot;/search&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; name=&quot;user_search&quot; required/&gt;
&lt;/form&gt;
...
</code></pre>

<p>Then we'll add a search <code>&lt;button&gt;</code>:</p>
<pre><code class="html">...
&lt;form action=&quot;/search&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; name=&quot;user_search&quot; required/&gt;
    &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;
&lt;/form&gt;
...
</code></pre>

<p>Now we have our completed <code>search.html</code>:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Search&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Search&lt;/h1&gt;
        &lt;form action=&quot;/search&quot; method=&quot;post&quot;&gt;
            &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; name=&quot;user_search&quot; required/&gt;
            &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><img alt="search.html" src="/webdev/img/level1_search.png" /></p>
<p>Right now the search button doesn't do anything, but we will add functionality to it in <a href="#level3">Level 3</a>.</p>
<p>In the meantime, let's connect our landing page (<code>hello.html</code>) to our search page (<code>search.html</code>). To do so, we just need to add a button to <code>hello.html</code> that redirects to a route that will serve <code>search.html</code>.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Reading List App&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Reading List App&lt;/h1&gt;
        &lt;p&gt;This web app allows users to search for books and add them to their reading lists!&lt;/p&gt;
        &lt;a href=&quot;/search&quot;&gt;&lt;button&gt;Launch App&lt;/button&gt;&lt;/a&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Note that the button is wrapped in an <code>href</code> to <code>/search</code>. This means that when you click on the button, it will take you from <code>localhost:5000</code> to <code>localhost:5000/search</code> (when running locally). Now we just need to write a search route in <code>app.py</code>. Replace the old <code>/search/&lt;search_query&gt;</code> route with this:</p>
<pre><code class="python">@app.route(&quot;/search&quot;)
def search():
    return render_template(&quot;search.html&quot;)
</code></pre>

<p>Try it out by going to <code>localhost:5000</code> and clicking the "Launch App" button!</p>
<p><a href="#top" class="top" id="level2">Top</a></p>
<h1 id="level-2-styling-our-app-css">Level 2: Styling our App: CSS</h1>
<blockquote>
<p>If you have not completed the previous levels, download the starter code for level 2 <a href="https://github.com/RaymondXu/devfest-webdev-track-code/tree/level2">here</a>.</p>
</blockquote>
<p>Now that we have a basic landing page, let's add some styling to it so it doesn't look so bland!</p>
<p><a href="http://en.wikipedia.org/wiki/Css">CSS</a>, or Cascading Style Sheets, is a styling language that is used to arrange and stylize HTML elements. CSS is extremely powerful, but also fairly hard to learn. Every different browser interprets CSS slightly differently, and there are a lot of tricks and best practices that are hard to learn. As such, CSS is best learned by lots and lots of practice. The <a href="http://adicu.com/learn">ADI Resources</a> page has links to a lot of different tutorials and walkthroughs, if you want more practice after styling your Flask app.</p>
<p><a href="#top" class="top" id="css-basics">Top</a></p>
<h2 id="21-css-basics">2.1 CSS Basics</h2>
<p>CSS is a very simple language.  At it's core, CSS is made up of three parts: <em>selectors</em>, <em>properties</em>, and <em>values</em>.  Selectors are used to select which elements are being styled.  For example:</p>
<pre><code class="css">p { }
</code></pre>

<p>selects all <code>&lt;p&gt;</code> elements.</p>
<p>Inside the braces <code>{ }</code> are the <em>properties</em> and <em>values</em> separated by colons <code>:</code>, with semicolons <code>;</code> at the end of each property / value pair.  For example:</p>
<pre><code class="css">p { color: blue; }
</code></pre>

<p>would make all the <code>&lt;p&gt;</code> tags blue. Here, <code>color</code> is a property and <code>blue</code> is a value.  In terms of syntax, that's really it.  If we wanted to make all <code>&lt;p&gt;</code> tags blue and all <code>&lt;strong&gt;</code> tags red, here would be our CSS:</p>
<pre><code class="css">p {
    color: blue;
}
strong {
    color: red;
}
</code></pre>

<p>Notice that whitespace is not relevant to syntax.  Finally, comments should be surrounded in <code>/* */</code>.</p>
<pre><code class="css">/* this is a comment */
</code></pre>

<p>There is an extremely large collection of CSS properties and values, all of which are documented excellently at (surprise) the <a href="https://developer.mozilla.org/en-US/">Mozilla Developer Network</a>.  Again, avoid incorrect or out of date information by appending <code>mdn</code> to any Google searches related to CSS you might have!</p>
<p><a id=""></a></p>
<h3 id="211-applying-css-styles">2.1.1 Applying CSS Styles</h3>
<p>There are three ways to apply CSS to HTML elements.  The first is called <em>inline styling</em>.  Every element can be given a <code>style</code> attribute that can take CSS styles that apply to this element.  Doing this, we can avoid selectors entirely because all of our styling affects only the element that we are adding the <code>style</code> attribute to.  For example, this <code>&lt;p&gt;</code> tag will have blue text:</p>
<pre><code class="html">&lt;p style=&quot;color: blue&quot;&gt;This text is blue.&lt;/p&gt;
</code></pre>

<p>Inline styles are problematic, however.  Not only do we clutter the text that is being displayed, but also we would have to duplicate our styling for every paragraph we have!</p>
<pre><code class="html">&lt;p style=&quot;color: blue&quot;&gt;This text is blue.&lt;/p&gt;
&lt;p style=&quot;color: blue&quot;&gt;An so is this text.&lt;/p&gt;
&lt;p style=&quot;color: blue&quot;&gt;And this text.&lt;/p&gt;
</code></pre>

<p>Because of this, inline styles should be <em>absolutely avoided</em> unless you are writing for mail clients that ignore CSS that isn't inline.</p>
<p>We can also apply CSS in a <code>&lt;style&gt;</code> element, in the <code>&lt;head&gt;</code>, like so:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;CSS Demo&lt;/title&gt;
        &lt;style&gt;
p {
    color: blue;
}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;This text is blue.&lt;/p&gt;
        &lt;p&gt;An so is this text.&lt;/p&gt;
        &lt;p&gt;And this text.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>This is great, because the body of the document is a lot less cluttered.  As you can imagine, this is only relocates the problem.  now the head of the document is messy and full of CSS styles.  As your HTML gets longer so does your CSS, and now documents can reach unmanageable length.</p>
<p>For the same reason we might break up a large programming project into classes and functions, we want to get our CSS out of our <code>.html</code> document entirely.  Enter the <code>&lt;link&gt;</code> tag, which lets us reference external <code>.css</code> stylesheets!  Link tags only need an open tag, and have no content or end tag.  Also, be sure to always include the <code>rel</code> attribute as 'stylesheet' and the <code>type</code> attribute as <code>text/css</code> alongside the <code>href</code> attribute pointing to the <code>.css</code> file.</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;!-- demo.html --&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;CSS Demo&lt;/title&gt;
        &lt;link href=&quot;demo.css&quot; 
            rel=&quot;stylesheet&quot;
            type=&quot;text/css&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;This text is blue.&lt;/p&gt;
        &lt;p&gt;An so is this text.&lt;/p&gt;
        &lt;p&gt;And this text.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<pre><code class="css">/* demo.css */
p {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p>Using an external CSS file is the best practice, barring special circumstances.  You can even include multiple CSS files to keep things organized.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;!-- demo.html --&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;CSS Demo&lt;/title&gt;
        &lt;link href=&quot;blue.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
        &lt;link href=&quot;red.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;This text is blue.&lt;/p&gt;
        &lt;strong&gt;And this text is red.&lt;/strong&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h1 class="join"></h1>

<pre><code class="css">/* blue.css */
p {
    color: blue;
}
</code></pre>

<pre><code class="css">/* red.css */
strong {
    color: red;
}
</code></pre>

<h1 class="clear"></h1>

<h3 id="212-selectors">2.1.2 Selectors</h3>
<p>In the above examples <code>p</code> and <code>strong</code> in the <code>.css</code> files are <em>selectors</em>.  Selection can be done in a variety of different ways.  The most basic selection is by element name.</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-name.html --&gt;
&lt;p&gt;This text is blue&lt;/p&gt;
&lt;strong&gt;This text is not&lt;/strong&gt;
</code></pre>

<pre><code class="css">/* demo-name.css */
p {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p>If you provide a <code>class</code> attribute, the <code>.classname</code> syntax will select all elements with <code>class="classname"</code>.  Elements can have multiple classes using the syntax <code>class="classname1 classname2"</code>.</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-class.html --&gt;
&lt;p class=&quot;blue&quot;&gt;This text is blue&lt;/p&gt;
&lt;p&gt;This text is not blue&lt;/p&gt;
&lt;p class=&quot;blue underline&quot;&gt;
    This text is blue and underlined.
&lt;/p&gt;
</code></pre>

<pre><code class="css">/* demo-class.css */
.blue {
    color: blue;
}
.underline {
    /* Use the &quot;text-decoration&quot;
    property to underline text. */
    text-decoration: underline;
}
</code></pre>

<h1 class="clear"></h1>

<p>You can also give an element a unique <code>id</code> and it can be selected with the <code>#idname</code> syntax.  Do not give two elements the same id.</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-id.html --&gt;
&lt;p id=&quot;blue&quot;&gt;This text is blue&lt;/p&gt;
&lt;p&gt;This text is not blue&lt;/p&gt;
</code></pre>

<pre><code class="css">/* demo-id.css */
#blue {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p>There are also <em>relational selectors</em> for finding elements in the HTML document.  </p>
<p>Using the <em>descendant</em> selector syntax, or <code>selector1 selector2</code>, you can restrict <code>selector2</code> to only elements that are descendants of an element selected by <code>selector1</code>. For example:</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-descendant.html --&gt;
&lt;div class=&quot;blue&quot;&gt;
    &lt;h1&gt;This text is not blue&lt;/h1&gt;
    &lt;p&gt;This text is blue&lt;/p&gt;
    &lt;span&gt;
        &lt;p&gt;This text is also blue&lt;/p&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;This text is not blue&lt;/p&gt;
</code></pre>

<pre><code class="css">/* demo-descendant.css */
.blue p {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p>Similarly, the child selector syntax (<code>selector1 &gt; selector2</code>) will restrict <code>selector2</code> to only children (not grandchildren or other descendants) of elements selected by <code>selector1</code>.  For example:</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-child.html --&gt;
&lt;div class=&quot;blue&quot;&gt;
    &lt;h1&gt;This text is not blue&lt;/h1&gt;
    &lt;p&gt;This text is blue&lt;/p&gt;
    &lt;span&gt;
        &lt;p&gt;This text is NOT blue,
            because its parent is the 
            span tag, which does not 
            have the &quot;blue&quot; class.
        &lt;/p&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;This text is not blue&lt;/p&gt;
</code></pre>

<pre><code class="css">/* demo-child.css */
.blue &gt; p {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p>Finally, you can combine two selectors with a comma (<code>,</code>).  These two CSS files are the same:</p>
<h1 class="join"></h1>

<pre><code class="css">/* demo.css */
p {
    color: blue;
}
.blue {
    color: blue;
}
</code></pre>

<pre><code class="css">/* demo.css */
.blue, p {
    color: blue;
}
</code></pre>

<h1 class="clear"></h1>

<p><a id="basic-properties-and-values"></a></p>
<h3 id="213-basic-properties-and-values">2.1.3 Basic Properties and Values</h3>
<p>Learning CSS, for the most part, is about learning the knitty gritty details.  For an in-depth, comprehensive walkthrough of CSS properties and and how to apply them, check out <a href="http://htmldog.com">HTML Dog</a>'s excellent <a href="http://htmldog.com/guides/css/">CSS tutorial series</a>. In <a href="#external-libraries">section 2.2</a>, we will be applying CSS en-masse, using external libraries that provide shortcuts to a stylized webpage.  While using these libraries is good practice, these libraries always need to be accompanied by some extra CSS code for your own website.  For this reason, it's important to understand some basic CSS properties.</p>
<h4 id="color-and-background-color">Color and Background-Color</h4>
<p>You can change the background color of an element with the <code>background-color</code> attribute, just as you can change the text color with the <code>color</code> attribute.  There are many CSS properties that have colors as values, and for all of them colors can be represented in multiple ways (<a href="/webdev/build/mdn-colors">detailed in-depth at MDN</a>), the most simple (and limited) being <em>keywords</em> (like <code>blue</code>, <code>red</code>, etc.).</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-color.html --&gt;
&lt;body&gt;
    &lt;p class=&quot;blue&quot;&gt;
        This text is blue.
    &lt;/p&gt;
    &lt;p class=&quot;b-and-y&quot;&gt;
        This text is yellow on black.
    &lt;/p&gt;
&lt;/body&gt;
</code></pre>

<pre><code class="css">/* demo-color.css */
.blue { 
    color: blue;
}
.b-and-y {
    color: yellow;
    background-color: black;
}
</code></pre>

<h1 class="clear"></h1>

<h4 id="height-and-width">Height and Width</h4>
<p>The most basic CSS property is <code>height</code> and <code>width</code>.  They change the size of the <em>content area</em> of the selected element.  Height and weight take measurements of length (<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">detailed in depth at MDN</a>), the simplest being <em>pixels</em>, or <em>px</em>. </p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-height-width.html --&gt;
&lt;body&gt;
    &lt;div class=&quot;blue first&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;red second&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;blue third&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
</code></pre>

<pre><code class="css">/* demo-height-width.css */
.blue { background-color: blue; }
.red { background-color: red; }
.first {
    height: 100px;
    width: 200px;
}
.second {
    height: 150px;
    width: 150px;
}
.third {
    height: 50px;
    width: 300px;
}
</code></pre>

<h1 class="clear"></h1>

<p><img alt="demo-height-width" src="/webdev/img/demo-height-width.png" /></p>
<h4 id="borders">Borders</h4>
<p>You can also give your elements borders.  To create a visible border, you need to set three properties for the selected element: <code>border-width</code>, <code>border-style</code>, and <code>border-color</code>.  These three properties can be combined into one <code>border</code> attribute.  The values <code>width</code>, <code>style</code>, and <code>color</code> can be provided in any order.  The border will wrap around the box, not the text (note that the third resized <code>&lt;p&gt;</code> has a square border).</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-height-width.html --&gt;
&lt;body&gt;
    &lt;p class=&quot;first&quot;&gt;
        Black border, 3px wide.
    &lt;/p&gt;
    &lt;p class=&quot;second&quot;&gt;
        Same as above
    &lt;/p&gt;
    &lt;p class=&quot;third&quot;&gt;
        A thick, dashed blue border.
    &lt;/p&gt;
&lt;/body&gt;
</code></pre>

<pre><code class="css">/* demo-border.css */
.first {
    border-width: 3px;
    border-style: solid;
    border-color: black;
}
.second {
    border: 3px solid black;
}
.third {
    height: 100px;
    width: 100px;
    border: 10px dashed blue;
}
</code></pre>

<h1 class="clear"></h1>

<p><img alt="demo-border" src="/webdev/img/demo-border.png" /></p>
<h4 id="margin-and-padding">Margin and Padding</h4>
<p>Setting the <code>margin</code> and <code>padding</code> attributes for an element creates space around it.  The content area (changed by the <code>height</code> and <code>width</code> properties) border, margin, and padding make up the <em>box model</em>.  </p>
<p><img alt="boxmodel" src="/webdev/img/boxmodel.png" /></p>
<p><em>Photo credit to the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box_model">MDN page on the box model</a>.</em></p>
<p>For the most part, margin is used to create space outside of the element, and padding is used to make space inside the element.  The border sits just between the two.  </p>
<p>You can set margins with the <code>margin-top</code>, <code>margin-right</code>, <code>margin-bottom</code>, and <code>margin-left</code> attributes, and you can set padding with the <code>padding-top</code>, <code>padding-right</code>, <code>padding-bottom</code>, and <code>padding-left</code> attributes.  Values for these attributes are in units of length, and can even be negative.</p>
<p>The four margin and padding attributes can each be combined into <code>margin</code> and <code>padding</code>, and depending on how many arguments are provided, different of these properties will be set.  See the table for the details of how this works (<code>margin</code> is used, but the same goes for <code>padding</code>).</p>
<table>
<thead>
<tr>
<th>CSS</th>
<th>Shorthand</th>
<th><code>-top</code></th>
<th><code>-right</code></th>
<th><code>-bottom</code></th>
<th><code>-left</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>margin: 1px 2px 3px 4px</code></td>
<td><code>T R B L</code></td>
<td><code>1px</code></td>
<td><code>2px</code></td>
<td><code>3px</code></td>
<td><code>4px</code></td>
</tr>
<tr>
<td><code>margin: 1px 2px 3px</code></td>
<td><code>T R&amp;L B</code></td>
<td><code>1px</code></td>
<td><code>2px</code></td>
<td><code>3px</code></td>
<td><code>2px</code></td>
</tr>
<tr>
<td><code>margin: 1px 2px</code></td>
<td><code>T&amp;B R&amp;L</code></td>
<td><code>1px</code></td>
<td><code>2px</code></td>
<td><code>1px</code></td>
<td><code>2px</code></td>
</tr>
<tr>
<td><code>margin: 1px</code></td>
<td><code>T&amp;R&amp;B&amp;L</code></td>
<td><code>1px</code></td>
<td><code>1px</code></td>
<td><code>1px</code></td>
<td><code>1px</code></td>
</tr>
</tbody>
</table>
<p>Here are a couple different examples of padding and margins in action:</p>
<h1 class="join"></h1>

<pre><code class="html">&lt;!-- demo-height-width.html --&gt;
&lt;body&gt;
    &lt;div class=&quot;first&quot;&gt;One&lt;/div&gt;
    &lt;div class=&quot;second&quot;&gt;Two&lt;/div&gt;
    &lt;div class=&quot;third&quot;&gt;Three&lt;/div&gt;
&lt;/body&gt;
</code></pre>

<pre><code class="css">/* demo-margin-padding.css */
body {
    /* so that the effects of margins on the divs are easier to see. */
    margin: 0;
    padding: 0;
    border: 50px solid green;
}
div {
    /* Every div starts off as a yellow square with a black border. */
    height: 50px;
    width: 50px;
    background-color: yellow;
    border: 2px solid black;
}
.first {
    /* Offset from the wall on the left. */
    margin-left: 20px;
}
.second {
    /* Offset from block one by 50px. */
    margin-top: 50px;
    /* And the wall by 5px. */
    margin-left: 5px;
    /* 20px larger in each dimension because padding is inside the border, but text is offset by 20px (that's why the text doesn't hug the border). */
    padding:20px;
}
.third {
    /* Offset from the bottom by 10px, and 25px higher and to the left than expected because of the negative values. */
    margin: -25px 0 10px -25px;
    /* Taller with the text separated from the top of the box. */
    padding-top:20px;
}
</code></pre>

<h1 class="clear"></h1>

<p><img alt="demo-margin-padding" src="/webdev/img/demo-margin-padding.png" /></p>
<p><a id="using-the-inspector"></a></p>
<h3 id="214-using-the-inspector">2.1.4 Using the Inspector</h3>
<p>One of the most important skills to learn as a web developer writing CSS is to learn how to use the inspector in your favorite browser (Internet Explorer not allowed).  The inspector lets you see the HTML, CSS, and JavaScript that your web browser is rendering, live!  You can inspect your own web page to find bugs or make tweaks to your code, or inspect other pages to learn how to imitate a desired HTML/CSS/JS effect.</p>
<p>With a web page open in FireFox, there are <a href="https://developer.mozilla.org/en-US/docs/Tools/Page_Inspector">three ways to inspect the page</a>:</p>
<ul>
<li>Choose the "Inspector" option from the "Web Developer" menu (which is a submenu in the "Tools" menu on the Mac).</li>
<li>Press <code>Ctrl</code>+<code>Shift</code>+<code>C</code> (<code>Cmd</code>+<code>Option</code>+<code>C</code> on the Mac OS X and Linux).</li>
<li>Right-click an element on a web page and select "Inspect Element".</li>
</ul>
<p>With a web page open in Chrome, there are <a href="https://developers.google.com/chrome-developer-tools/">three ways to inspect the page</a>:</p>
<ul>
<li>Select the Chrome menu  at the top-right of your browser window, then select Tools &gt; Developer tools.</li>
<li>Use <code>Ctrl</code>+<code>Shift</code>+<code>I</code> (or <code>Cmd</code>+<code>Opt</code>+<code>I</code> on Mac) to open the DevTools.</li>
<li>Right-click on any page element and select Inspect element.</li>
</ul>
<p>To <a href="https://developer.apple.com/library/mac/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/GettingStarted/GettingStarted.html">inspect a page in Safari</a>, you first have to enable the Develop menu. Go into Safari's preferences, and check the “Show Develop menu in menu bar” checkbox in the "Advanced" pane. Then, you open the inspector in three ways:</p>
<ul>
<li>Choose the "Show Web Inspector" option in the "Develop" menu.</li>
<li>Press <code>Cmd</code>+<code>Option</code>+<code>I</code>.</li>
<li>Right-click an element on a web page and select "Inspect Element".</li>
</ul>
<p><a href="#top" class="top" id="external-libraries">Top</a></p>
<h2 id="22-external-libraries">2.2 External Libraries</h2>
<p>Building an entire web app from scratch can be an undertaking.  In order to speed up the process, many web developers use <em>front-end frameworks</em>, which are packages of HTML, CSS, and JavaScript that can be included in your web app.</p>
<p>The two most famous front-end frameworks are <a href="http://getbootstrap.com/getting-started/">Twitter Bootstrap</a> and <a href="http://foundation.zurb.com">Foundation by Zurb</a>.  Which one is better to use is up for debate, but if you believe <a href="https://medium.com/frontend-and-beyond/8b3812c7007c">this Medium post</a>, then the difference can be articulated fairly plainly:</p>
<blockquote>
<p>ZURB and Twitter made their objectives and intentions very clear when naming each CSS Frameworks: Bootstrap will have everything you’ll ever need to bootstrap your project. Foundation will have just the things you will ever need as the foundation for your project. </p>
</blockquote>
<p>We'll be using Foundation, because it's slimmer and simpler, and will provide a strong backbone for our app. You should keep <a href="http://foundation.zurb.com/docs/css.html">Foundation's newly revamped documentation</a> open at all times for this section &mdash; it's a great reference tool.  </p>
<p>One other thing before we get started: on the Foundation website, you will continue to see references to "Sass" or "SCSS".  These are languages that extend the CSS syntax. They are more powerful, but harder to learn and develop in for the first time.  We are using "Foundation CSS", which is Foundation that uses raw CSS instead of Sass.  When we go onto the documentation page for different Foundation components you will see a section called "Customize with Sass" at the bottom.  For the purposes of our app, we can ignore this. </p>
<p><a id="using-foundation"></a></p>
<h3 id="221-using-foundation">2.2.1 Using Foundation</h3>
<p>Using Foundation can be as simple as applying some extra classes to HTML elements, applying the imported CSS.  For general purpose "style-based" changes this is fine. (The class <code>button</code> will make an <code>&lt;a&gt;</code> tag look like a button, and so on. Just look up the component your are styling in the <a href="http://foundation.zurb.com/docs/css.html">Foundation docs</a> and you'll be fine.) While Foundation offers many shortcuts to attractively styled pages, it also provide "layout-based" classes that are used for placing elements appropriately on the page.  Chief among these is Foundation's <a href="http://foundation.zurb.com/docs/components/grid.html">grid system</a>.</p>
<p>The grid system makes layout easy.  A <code>&lt;div&gt;</code> with class <code>row</code> hold 12 columns, and then you can create <code>&lt;div&gt;</code>s that take up any number of those columns.  For example, the following would create three side-by-side columns:</p>
<pre><code class="html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;large-4 columns&quot;&gt;Left&lt;/div&gt;
  &lt;div class=&quot;large-4 columns&quot;&gt;Middle&lt;/div&gt;
  &lt;div class=&quot;large-4 columns&quot;&gt;Right&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Foundation's grid system is <em>responsive</em>, meaning that it adapts to different screen sizes.  <code>small</code> is every screen from 0-640px, <code>medium</code> is 641-1024px, and <code>large</code> is 1025px and up.  The numbers after the <code>large-</code>, <code>medium-</code>, <code>small-</code> classes to be how many columns that <code>&lt;div&gt;</code> takes up at that range and up.  These numbers jump to 12 when you go below the size before the <code>-</code>.  So for our example, as soon as the screen is resized to less than 1025px all three of the <code>columns</code> become 12 columns wide (taking up the entire row, and thusly being stacked on top of each other.)  If we refactored like this:</p>
<pre><code class="html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;small-4 columns&quot;&gt;Left&lt;/div&gt;
  &lt;div class=&quot;small-4 columns&quot;&gt;Middle&lt;/div&gt;
  &lt;div class=&quot;small-4 columns&quot;&gt;Right&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>they would remain 4 columns no matter how small the screen was.  </p>
<p>What about this code?: </p>
<pre><code class="html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;small-6 medium-4 large-3 columns&quot;&gt;Left&lt;/div&gt;
  &lt;div class=&quot;small-6 medium-4 large-6 columns&quot;&gt;Middle&lt;/div&gt;
  &lt;div class=&quot;medium-4 large-3 columns&quot;&gt;Right&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Well, at screens wider than 1024px, we have 3,6,3, so the middle <code>&lt;div&gt;</code> will be twice as large as the ones on the sides.  Then, between 641-1024px, all three are the same size.  Finally, on screens 640px and narrower, the left and the right <code>&lt;div&gt;</code>s are half the screen, and the right columns overflows to be on it's next line. (The <code>small-#</code> class is not defined on the third <code>&lt;div&gt;</code>, so it becomes 12 columns wide.)</p>
<p>The grid system can be a little daunting, but with practice and <a href="http://foundation.zurb.com/docs/components/grid.html">the documentation</a> at hand, it is manageable.</p>
<p><a id="installing-foundation"></a></p>
<h3 id="222-installing-foundation">2.2.2 Installing Foundation</h3>
<p>Installing Foundation is as easy as 1 2 3.</p>
<h4 id="1-download">1. Download</h4>
<p>Go to <a href="http://foundation.zurb.com/docs/css.html">the Foundation download page</a> and click the blue "Download Foundation CSS" button.  It will download the latest version of Foundation in a zip file.</p>
<h4 id="2-integrate">2. Integrate</h4>
<p>Unzip the file.  Inside, you'll see a couple of files and folders, but the ones we care about are <code>css</code> and <code>js</code>.  Remember how we have a <code>css</code> and <code>js</code> folder under the <code>static</code> folder of our Flask app?  Copy <code>foundation.css</code> from <code>&lt;Download_Directory&gt;/foundation-x.x.x/css</code> into <code>&lt;Project_Directory&gt;/static/css</code> and <code>foundation.js</code> and <code>vendor</code> from <code>&lt;Download_Directory&gt;/foundation-x.x.x/js</code> into <code>&lt;Project_Directory&gt;/static/js</code>.</p>
<blockquote>
<p>Curious what Foundation looks like?  You could poke around the Foundation documentation, or open <code>index.html</code> with all the CSS and JS still in the <code>foundation-x.x.x</code> folder.  Pretty slick looking!</p>
</blockquote>
<h4 id="3-template">3. Template</h4>
<p>On the Zurb website, they have templates for basic Foundation apps. Here is a basic one that we will use for our project:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt; 
&lt;html lang=&quot;en&quot; &gt; 
&lt;head&gt; 
  &lt;meta charset=&quot;utf-8&quot;&gt; 
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; 
  &lt;title&gt;Foundation&lt;/title&gt; 
  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/foundation.css&quot;&gt; 
&lt;/head&gt; 
&lt;body&gt; 

  &lt;!-- body content here --&gt; 

  &lt;script src=&quot;js/vendor/jquery.min.js&quot;&gt;&lt;/script&gt; 
  &lt;script src=&quot;js/foundation.js&quot;&gt;&lt;/script&gt; 
  &lt;script&gt; 
    $(document).foundation(); 
  &lt;/script&gt; 
&lt;/body&gt; 
&lt;/html&gt;
</code></pre>

<p>Apply the boilerplate code above to <code>hello.html</code> while preserving the content:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Reading List App&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;static/css/foundation.css&quot;&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;static/css/app.css&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Reading List App&lt;/h1&gt;
        &lt;p&gt;This web app allows users to search for books and add them to their reading lists!&lt;/p&gt;
        &lt;a href=&quot;/search&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Launch App&lt;/button&gt;&lt;/a&gt; 
    &lt;/body&gt;
    &lt;script src=&quot;static/js/jquery.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;static/js/foundation.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt; 
        $(document).foundation(); 
    &lt;/script&gt; 
&lt;/html&gt;
</code></pre>

<p>Note that we also link to <code>css/app.css</code>, which is for CSS code specific to our app (Never edit any of the Foundation files!).  Create an empty file called <code>app.css</code> in the <code>css</code> folder, that we will add code to later:</p>
<pre><code class="css">/* app.css */
</code></pre>

<p><a id="adding-css-to-our-project"></a></p>
<h3 id="23-adding-css-to-our-project">2.3 Adding CSS to Our Project</h3>
<p>Now that you've learned the basics of CSS and Foundation, let's add some styling to our landing page!</p>
<p>Let's first use Foundation to add some structure to the content. Modify <code>hello.html</code> to wrap the body's content in the <code>row</code>, <code>large-12 columns</code>, and <code>panel</code> classes.</p>
<pre><code class="html">...
&lt;body&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;large-12 columns&quot;&gt;
            &lt;div class=&quot;panel&quot;&gt;
                &lt;h1&gt;Reading List App&lt;/h1&gt;
                &lt;p&gt;This web app allows users to search for books and add them to their reading lists!&lt;/p&gt;
                &lt;a href=&quot;/search&quot;&gt;&lt;button&gt;Launch App&lt;/button&gt;&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
...
</code></pre>

<p>Now let's write some CSS in <code>app.css</code> to further customize our landing page. We will start by adding a themed background image to our app! Add the following lines to <code>app.css</code>.</p>
<pre><code class="css">body, html {
    height: 100%;
    width: 100%;
}

body {
    background: black url(https://images.unsplash.com/reserve/fvD9myEgRued3zLne2GS__DSC0033-1.jpg?crop=entropy&amp;fit=crop&amp;fm=jpg&amp;h=725&amp;ixjsv=2.1.0&amp;ixlib=rb-0.3.5&amp;q=80&amp;w=1450) no-repeat fixed center center;
}
</code></pre>

<p>See what the landing page looks like by visiting <code>localhost:5000</code>. Make sure the background image appears.</p>
<p>Let's fix the styling of our text so that it stands out from the background image. Add the following lines to <code>app.css</code>.</p>
<pre><code class="css">.panel {
    margin-top: 80px;
    text-align: center;
    background-color: rgba(242, 242, 242, 0.9);
    padding: 15px 0px 70px 0px;
}

.panel h1 {
    font-size: 3rem;
}

.panel p {
    font-size: 1.3rem;
    padding: 20px 0px;
}
</code></pre>

<p>Lastly, let's make our buttons more interesting. Add the following lines to <code>app.css</code>.</p>
<pre><code class="css">button {
    background-color: #FF9900;
    color: #EEEEEE;
    font-size: 1.5rem;
    font-weight: 500;
}

button:hover {
    background-color: #D77E22;
}

.launch-button {
    margin-top: 25px;
    padding: 30px;
}

.search-button {
    padding: 5px 20px;
}
</code></pre>

<p>Now that we've defined the <code>launch-button</code> and <code>search-button</code> classes, use them the HTML! In <code>hello.html</code>:</p>
<pre><code class="html">...
&lt;a href=&quot;/search&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Launch App&lt;/button&gt;&lt;/a&gt;
...
</code></pre>

<p>And in <code>search.html</code>:</p>
<pre><code class="html">...
&lt;button class=&quot;postfix search-button&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt;
...
</code></pre>

<p>Great! Now we have a basic landing page styled using CSS and foundation. We will style the rest of our app after we finish implementing some functionality.</p>
<p><img alt="style" src="/webdev/img/level2_hello.png" /></p>
<p><a href="#top" class="top" id="level3">Top</a></p>
<h1 id="level-3-adding-search-functionality-apis">Level 3: Adding Search Functionality: APIs</h1>
<p><a href="#top" class="top" id="api-basics">Top</a></p>
<h2 id="31-api-basics">3.1 API Basics</h2>
<blockquote>
<p>If you have not completed the previous levels, download the starter code for level 3 <a href="https://github.com/RaymondXu/devfest-webdev-track-code/tree/level3">here</a>.</p>
</blockquote>
<p>This section will take a step aside from our Flask project to build a foundation of knowledge around APIs and how they are used.  We will return to our app in <a href="#google-books-api">section 3.2</a>.</p>
<p><a id="rest-apis"></a></p>
<h3 id="311-rest-apis">3.1.1 REST APIs</h3>
<p>APIs let us access external data in an easy, standardized way.  In the webapp world, when we say API we usually mean <a href="http://en.wikipedia.org/wiki/REST_API">REST (or RESTful) API</a>, which can be effectively thought of as an API that is accessible at a series of URL addresses. An extremely simple example of a REST API is <a href="http://placekitten.com">placekitten.com</a>, an API that serves images of kitten.  Here's how it works.  If you point your browser to <code>http://placekitten.com/g/&lt;width&gt;/&lt;height&gt;</code>, it returns a picture of a kitten with that width and height in grayscale. Go to these urls to see a very basic REST API in action.</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>Image</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://placekitten.com/g/200/150"><code>http://placekitten.com/g/200/150</code></a></td>
<td><img alt="http://placekitten.com/g/200/150" src="http://placekitten.com/g/200/150" /></td>
</tr>
<tr>
<td><a href="http://placekitten.com/g/300/250"><code>http://placekitten.com/g/300/250</code></a></td>
<td><img alt="http://placekitten.com/g/200/300" src="http://placekitten.com/g/300/250" /></td>
</tr>
</tbody>
</table>
<p>The advantage in using a REST API here is that we don't need to remember the URL of the image we want, just the quality (500x500).  Then, using the <em>documentation</em> provided at <a href="http://placekitten.com">placekitten.com</a>, we can derive the URL necessary to find the image we want.</p>
<blockquote>
<p>Many web designers use placeholder image APIs like <a href="http://placekitten.com">placekitten.com</a> or <a href="http://placehold.it">placehold.it</a> in their designs, as they speed up prototyping.</p>
</blockquote>
<p><a id="the-anatomy-of-a-url"></a></p>
<h3 id="312-the-anatomy-of-a-url">3.1.2 The Anatomy of a URL</h3>
<p>From here out we will be using some increasingly complex <a href="http://en.wikipedia.org/wiki/Uniform_resource_locator">URLs</a>, and it is important to develop a vocabulary for the parts of the url and their purpose.  To do this, we will dissect this url (which we will use in <a href="#google-books-api">section 3.2</a> when we work with the Google Books API):</p>
<pre><code>https://www.googleapis.com/books/v1/volumes?q=Treasure
</code></pre>
<p>This URL breaks up into six parts:</p>
<ol>
<li>The protocol (<code>https</code>): We are using the <a href="http://en.wikipedia.org/wiki/Https">HTTPS</a> protocol, which is a secure version of HTTP, detailed in <a href="#http">section 3.1.5</a>.</li>
<li>The separator (<code>://</code>): A colon and two slashes always follow the protocol and are used to separate the protocol and the host.</li>
<li>The subdomain (<code>www.</code>): Not always required.</li>
<li>The host (<code>googleapis.com</code>): A host is usually a domain name (this is the case for our url), but it could also be an IP Address.</li>
<li>The path (<code>/books/v1/volumes</code>): Everything from the first <code>/</code> up to the <code>?</code> that starts the query string is the path. When accessing a web page, often these paths will be hierarchical and include a filename at the end, like <code>/blog/2014/02/post.html</code>.  When making API calls, these paths are the API method that is being called.  Here, we are searching books.</li>
<li>The query string (<code>q=Treasure</code>): is a key-value pair of the form <code>&lt;key&gt;=&lt;value&gt;</code>. The query string starts with a <code>?</code> and can have multiple key-value pairs that are separated by <code>&amp;</code>. In our case we only have one pair.</li>
</ol>
<blockquote>
<p>This URL schema is by no means complete; it encompasses the parts of a URL that are most relevant to API programming.  For a more complete view, check out <a href="http://www.mattcutts.com/blog/seo-glossary-url-definitions/">this blog post</a> by Google's Matt Cutts, or this exhaustive <a href="http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax">Wikipedia entry</a>.</p>
</blockquote>
<p><a id="data-in-json"></a></p>
<h3 id="313-data-in-json">3.1.3 Data in JSON</h3>
<p>The data that we usually want to get from a RESTful API is text, not images, and to organize this text we use the <a href="http://en.wikipedia.org/wiki/Json">JSON</a>, or JavaScript Object Notation text format.  JSON is a text format that makes data easy to read and simple to manipulate.  Here's a quick rundown:</p>
<p>Most JSON documents start and end with braces (<code>{ }</code>).  We'll learn what these are later.</p>
<pre><code class="javascript">{ }
</code></pre>

<p>The core element of JSON documents are key-value pairs.  A key is a string, and a value can be (amongst other things) a string. Keys and values are separated by a colon (<code>:</code>).</p>
<pre><code class="javascript">{ &quot;name&quot;: &quot;Jane Doe&quot; }
</code></pre>

<p>Whitespace non-significant, and should be added for readability.</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Jane Doe&quot;
}
</code></pre>

<p>Multiple key-value pairs can be separated by commas (<code>,</code>).</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Jane Doe&quot;,
    &quot;occupation&quot;: &quot;student&quot;,
    &quot;school&quot;: &quot;Columbia University&quot;
}
</code></pre>

<p>Values can also be decimal numbers, boolean values (<code>true</code> or <code>false</code>), or <code>null</code>.</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Jane Doe&quot;,
    &quot;age&quot;: 20,
    &quot;female&quot;: true,
    &quot;male&quot;: false,
    &quot;occupation&quot;: &quot;student&quot;,
    &quot;school&quot;: &quot;Columbia SEAS&quot;,
    &quot;children&quot;: null
}
</code></pre>

<p>Values can also be arrays.  Arrays are comma-separated values surrounded by brackets (<code>[ ]</code>).  Values in arrays should be all of the same type, but don't have to be.</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Jane Doe&quot;,
    &quot;age&quot;: 20,
    &quot;female&quot;: true,
    &quot;male&quot;: false,
    &quot;occupation&quot;: &quot;student&quot;,
    &quot;school&quot;: &quot;Columbia SEAS&quot;,
    &quot;children&quot;: null,
    &quot;hobbies&quot;: [
        &quot;programming&quot;,
        &quot;cello&quot;,
        &quot;painting&quot;,
        &quot;basketball&quot;,
        &quot;REST APIs&quot;
    ],
    &quot;luckynumbers&quot; : [
        10, 25.3, 404
    ]
}
</code></pre>

<p>The final value type is the object.  An object is a set of comma-separated key-value pairs surrounded by braces (<code>{ }</code>).  In fact, our entire JSON document is one big object.</p>
<pre><code class="javascript">{
    &quot;name&quot;: &quot;Jane Doe&quot;,
    &quot;age&quot;: 20,
    &quot;female&quot;: true,
    &quot;male&quot;: false,
    &quot;occupation&quot;: &quot;student&quot;,
    &quot;school&quot;: {
        &quot;fullname&quot;: &quot;The Fu Foundation School of Engineering &amp; Applied Science&quot;,
        &quot;university&quot;: &quot;Columbia University&quot;,
        &quot;undergrad&quot;: true
    },
    &quot;children&quot;: null,
    &quot;hobbies&quot;: [
        &quot;programming&quot;,
        &quot;cello&quot;,
        &quot;painting&quot;,
        &quot;basketball&quot;,
        &quot;REST APIs&quot;
    ],
    &quot;luckynumbers&quot; : [
        10, 25.3, 404
    ]
}
</code></pre>

<blockquote>
<p>Most JSON documents are one big object, but they can also be one big array:</p>
<p><!--!!!javascript-->
<!--!!!-->
<code>[
    "This",
    "Is",
    {
        "valid": JSON
    }
]</code></p>
</blockquote>
<p>JSON can represent a wide variety of data, just using the simple types:</p>
<ul>
<li>Objects</li>
<li>Arrays</li>
<li>Strings</li>
<li>Numbers</li>
<li>Booleans</li>
<li><code>null</code></li>
</ul>
<p><a id="viewing-json-in-the-browser"></a></p>
<h3 id="314-viewing-json-in-the-browser">3.1.4 Viewing JSON in the Browser</h3>
<p>JSON is the most common data format returned by RESTful APIs.  For example, <a href="http://colr.org">colr.org</a>'s <a href="http://colr.org/api.html">API</a> returns it's responses in JSON format.  Try it: point your browser to <a href="http://www.colr.org/json/color/e0d1dd">http://www.colr.org/json/color/e0d1dd</a>.  You'll probably see some unreadable mess like this:</p>
<pre><code class="javascript">{&quot;colors&quot;: [{&quot;timestamp&quot;: 1187574833, &quot;hex&quot;: &quot;e0d1dd&quot;,
&quot;id&quot;: 19425, &quot;tags&quot;:    [{&quot;timestamp&quot;: 1111913422, &quot;id&quot;:
11257, &quot;name&quot;: &quot;joyful&quot;}, {&quot;timestamp&quot;: 1108110854,
&quot;id&quot;: 2798, &quot;name&quot;: &quot;lilac&quot;}]}], &quot;schemes&quot;: [],
&quot;schemes_history&quot;: {}, &quot;success&quot;: true, &quot;colors_history&quot;:
{&quot;e0d1dd&quot;: [{&quot;d_count&quot;: 0, &quot;id&quot;: &quot;11257&quot;, &quot;a_count&quot;: 1,
 &quot;name&quot;: &quot;joyful&quot;}, {&quot;d_count&quot;: 0, &quot;id&quot;: &quot;2798&quot;,
 &quot;a_count&quot;: 1, &quot;name&quot;: &quot;lilac&quot;}]}, &quot;messages&quot;: [],
 &quot;new_color&quot;: &quot;e0d1dd&quot;}
</code></pre>

<p>To view JSON in the browser, use a browser extension like JSONView (<a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en">Chrome</a>, <a href="https://addons.mozilla.org/en-us/firefox/addon/jsonview/">Firefox</a>) or JSON Formatter (<a href="https://github.com/rfletcher/safari-json-formatter">Safari</a>).  Install the appropriate extension and reload <a href="http://www.colr.org/json/color/e0d1dd">that url</a>.  You should now see the JSON with the proper indentation that we like.  If that didn't work for you or you're using another browser, copy the mess into <a href="http://jsonprettyprint.com/">jsonprettyprint.com</a> to see it nicely formatted.</p>
<p>It should look like this:</p>
<pre><code class="javascript">{
  &quot;colors&quot;: [
    {
      &quot;timestamp&quot;: 1187574833,
      &quot;hex&quot;: &quot;e0d1dd&quot;,
      &quot;id&quot;: 19425,
      &quot;tags&quot;: [
        {
          &quot;timestamp&quot;: 1111913422,
          &quot;id&quot;: 11257,
          &quot;name&quot;: &quot;joyful&quot;
        },
        {
          &quot;timestamp&quot;: 1108110854,
          &quot;id&quot;: 2798,
          &quot;name&quot;: &quot;lilac&quot;
        }
      ]
    }
  ],
  &quot;schemes&quot;: [],
  &quot;schemes_history&quot;: {},
  &quot;success&quot;: true,
  &quot;colors_history&quot;: {
    &quot;e0d1dd&quot;: [
      {
        &quot;d_count&quot;: 0,
        &quot;id&quot;: &quot;11257&quot;,
        &quot;a_count&quot;: 1,
        &quot;name&quot;: &quot;joyful&quot;
      },
      {
        &quot;d_count&quot;: 0,
        &quot;id&quot;: &quot;2798&quot;,
        &quot;a_count&quot;: 1,
        &quot;name&quot;: &quot;lilac&quot;
      }
    ]
  },
  &quot;messages&quot;: [],
  &quot;new_color&quot;: &quot;e0d1dd&quot;
}
</code></pre>

<p>So now that we see it nicely formatted, what are we seeing here?</p>
<p>The document is one big object, with keys   <code>colors</code>, <code>schemes</code>, <code>schemes_history</code>, <code>success</code>, <code>colors_history</code>, <code>messages</code>, and <code>new_color</code>.  The value associated with the key <code>colors</code> is an array containing one color object, which has the keys <code>timestamp</code>, <code>hex</code>, <code>id</code>, and <code>tags</code>.  The value associated with the key <code>tags</code> is also an array of objects, where each of these objects is a tag.</p>
<p>So how did we know that the array for <code>colors</code> held color objects and the array for <code>tags</code> holds tag objects?  We don't.  With JSON, we don't have strictly defined object types like many programming languages do.  We have to trust the creator of the JSON document to store their data in a consistent way.  Because the JSON we are reading is written well, the <code>tags</code> key has an array value that holds objects that look very similar and have the attributes of a tag.  The API call we are making is for one specific color, so it makes sense that array associated with the <code>colors</code> key has only color object in it.</p>
<p>Try out these other API calls (<code>http://colr.org&lt;path&gt;</code>) to see how colr.org used this JSON structure to return different types of results:</p>
<table>
<thead>
<tr>
<th>Path</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.colr.org/json/color/e0d1dd"><code>/json/color/e0d1dd</code></a></td>
<td>data for the color with hex value <code>e0d1dd</code></td>
</tr>
<tr>
<td><a href="http://www.colr.org/json/colors/e0d1dd,95604a"><code>/json/colors/e0d1dd,95604a</code></a></td>
<td>data for the colors <code>e0d1dd</code> and <code>95604a</code></td>
</tr>
<tr>
<td><a href="http://www.colr.org/json/color/random"><code>/json/color/random</code></a></td>
<td>data for random color</td>
</tr>
<tr>
<td><a href="http://www.colr.org/json/colors/random/3"><code>/json/colors/random/3</code></a></td>
<td>data for three random colors</td>
</tr>
</tbody>
</table>
<p><a id="http"></a></p>
<h3 id="315-extension-http">3.1.5 Extension: HTTP</h3>
<p><em>If you don't remember the <a href="http://en.wikipedia.org/wiki/Client%E2%80%93server_model">client-server model</a>, you should review it before reading this section.</em></p>
<p>By now, you've seen "HTTP" in every URL in this document. Let's look a little at what "HTTP" actually means.</p>
<p>"HyperText Transfer Protocol" is the protocol by which your browser asks for and receives web sites (and lots of other
data). A web server sits around and listens for an <em>HTTP request</em>, which is when a web browser or other client asks for
a particular item (ex. web page or image) that the server has. An HTTP request looks something like this:</p>
<pre><code>GET /index.html HTTP/1.1
Host: www.google.com
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:26.0) Gecko/20100101 Firefox/26.0
</code></pre>
<p>There's a lot going on here, but you only need to pay attention to a few parts:</p>
<ul>
<li>
<p><code>GET</code>: this is what we call an <em>HTTP verb</em>. This tells the web server what the client wants it to do. <code>GET</code> means
  "give me a resource"; <code>POST</code> means "here is some data"; <code>DELETE</code> means "get rid of this resource".</p>
</li>
<li>
<p><code>/index.html</code>: this indicates the resource that should be acted upon (using the given verb).</p>
</li>
<li>
<p><code>HTTP/1.1</code>: this is the HTTP version; it's almost always 1.1 (which has been
  around since 1999).</p>
</li>
<li>
<p>The lines that begin with a word or phrase followed by a colon are called <em>headers</em>. They convey additional
  information. <code>Host</code> is the header that indicates what site the client wanted to access. <code>User-Agent</code> is the program
  that you're using as a client; here, it's Firefox.</p>
</li>
</ul>
<p>Then, the server processes the request and sends back an <em>HTTP response</em>:</p>
<pre><code>HTTP/1.1 200 OK
Date: Mon, 23 May 2005 22:38:34 GMT
Server: Apache/1.3.3.7 (Unix) (Red-Hat/Linux)
Last-Modified: Wed, 08 Jan 2003 23:11:55 GMT
ETag: "3f80f-1b6-3e1cb03b"
Content-Type: text/html; charset=UTF-8
Content-Length: 131
Connection: close

&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;An Example Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  Hello World, this is a very simple HTML document.
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The first line includes the HTTP version that the server is using, followed by an <em>HTTP status code</em> and reason. Here,
the status is <code>200</code> and the reason is <code>OK</code>. This means that all went well.</p>
<ul>
<li>Status codes in the 100s are informational messages; you don't need to worry about them most of the time.</li>
<li>Status codes in the 200s mean that the request was processed successfully.</li>
<li>Status codes in the 300s mean that the client must do something else in order to complete the request successfully; an
  example is a redirect message (301).</li>
<li>Status codes in the 400s mean that the client did something wrong; for example, code 404 means that the resource the
  client asked for could not be found by the server.</li>
<li>Status codes in the 500s mean that something is wrong with the server; code 500 is a generic error message.</li>
</ul>
<p>Then, there are a bunch of headers. After that is a blank line, then the <em>body</em> of the response (that is, the actual
data requested).</p>
<p>After the body of the response, the server closes the connection. To request another resource, the client must begin the
whole process again.</p>
<p>Check out the HTTP requests your browser makes! In Firefox, hit <code>Ctrl-Shift-Q</code> to open the network tool, or in Chrome,
hit <code>Ctrl-Shift-I</code> to open Developer tools and navigate to the "Network" tab (Mac users should use <code>Cmd</code> instead). Then,
browse the internet a little. Check out <a href="http://www.example.com">here</a> for an example of a successful request, and
<a href="http://www.adicu.com/notfound">here</a> for an example of an unsuccessful request.</p>
<p><a href="#top" class="top" id="google-books-api">Top</a></p>
<h2 id="32-google-books-api">3.2 Google Books API</h2>
<p>In order to search for books using our search route, we'll use the Google Books API.  The first step for using any API is to familiarize yourself with its documentation, and so our first stop is <a href="https://developers.google.com/books/docs/v1/reference/">https://developers.google.com/books/docs/v1/reference/</a>.  We know that we want to search for books, so we'll focus on the <a href="https://developers.google.com/books/docs/v1/reference/volumes">"Volume" section</a>.</p>
<p><a id="determining-the-request-url"></a></p>
<h3 id="321-determining-the-request-url">3.2.1 Determining the Request URL</h3>
<p>Before we can try to parse Google Books search data, we need to determine the correct request URL, including the correct query string.  We know the protocol, domain, and path.  Don't forget the <code>https</code>!</p>
<pre><code>https://www.googleapis.com/books/v1/volumes
</code></pre>
<p>Now let's examine the query string piece by piece.</p>
<p>For the <code>q</code> key, we want the search query.   For our testing we'll use <code>Treasure Island</code>.  We have to encode that string to be URL safe, so we'll use <code>Treasure%20Island</code> (The space character needs to be encoded to <code>%20</code>).</p>
<pre><code>https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island
</code></pre>
<p>If you put that URL into your browser, you should see the JSON response!</p>
<p><a id="using-curl"></a></p>
<h3 id="322-using-curl">3.2.2 Using cURL</h3>
<p><em>If you are using Windows, you may have to skip this section.  We will be using the cURL program, which is pre-installed on Mac and Linux machines.  It is possible to <a href="http://curl.haxx.se/download.html">install it on Windows</a>, but we won't walk through that process here.</em></p>
<p>The most basic way of interaction with an API call programmatically is through the command line.  The <a href="http://curl.haxx.se/docs/manpage.html">cURL</a> program runs in Terminal, and is used (most simply) to copy the content at a URL and print it to the screen.  First, open Terminal.  If you are on a Mac, open Finder, click <code>Applications</code> on the sidebar, open the <code>Utilities</code> folder, and then double click <code>Terminal</code>.</p>
<p>Change directory into your <em>working directory</em>, or the directory where <code>app.py</code> is.</p>
<p>Type the following command:</p>
<pre><code class="bash">$ curl https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island
</code></pre>

<p>You should see the entire JSON response (probably pretty long!) print to the console.  Now lets write that response to a file:</p>
<pre><code class="bash">$ curl https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island &gt; response.json
</code></pre>

<blockquote>
<p>The <code>&gt; response.json</code> section redirects all the output that would normally be sent to the console into the <code>response.json</code> file.</p>
</blockquote>
<p>You should now have a new file in your current directory named <code>response.json</code>.  If you open that file in your text editor, you'll see the response!</p>
<p><a id="using-python"></a></p>
<h3 id="323-using-python">3.2.3 Using Python</h3>
<p>Python has several built-in libraries for handling REST APIs, but we will be using the external library <a href="http://docs.python-requests.org/en/latest/">Requests</a>.  To install it, use <a href="http://www.pip-installer.org/en/latest/">Pip</a>:</p>
<pre><code class="bash">$ sudo pip install requests
</code></pre>

<p>Create a new python file:</p>
<pre><code class="bash">$ touch books.py
</code></pre>

<p>Editing <code>books.py</code>, start by importing requests.</p>
<pre><code class="python">import requests
</code></pre>

<p>Now all we need to to is call <code>requests.get()</code> on the API url we developed in <a href="#determining-the-request-url">section 3.2.1</a>.  This method returns a <a href="http://docs.python-requests.org/en/latest/api/#requests.Response">Response object</a>. Add a print statement to see what the object is.</p>
<pre><code class="python">import requests

url = &quot;https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island&quot;
response = requests.get(url)

print response
</code></pre>

<p>If you run this script, you should just see the Response object, represented by it's status code (hopefully <code>200</code>, or "OK").</p>
<pre><code class="bash">$ python books.py
&lt;Response [200]&gt;
</code></pre>

<p>The only other thing we need is to get usable data is to convert the response object into a Python dictionary, using the Response object's <code>.json()</code> method.  To show that it worked, print it to stdout.</p>
<pre><code class="python">import requests

url = &quot;https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island&quot;
response = requests.get(url)
response_dict = response.json()

print response_dict
</code></pre>

<p>This gives us, again a very large dictionary, printed to the screen.</p>
<blockquote>
<p>Try exploring the dictionary!  JSON has analogous structures in Python: objects become dictionaries, arrays become lists, and everything else converts as you expected.  For example, if you modify the print statement like so:</p>
<pre><code> print response_dict["items"][0]["volumeInfo"]["title"]
</code></pre>
<p>You should see it print the title of the first book in the search results.</p>
</blockquote>
<p><a id="using-flask-extending-the-search-route"></a></p>
<h3 id="324-using-flask-extending-the-search-route">3.2.4 Using Flask: Extending the Search Route</h3>
<p>Adapting our Python code to work in our search route will be pretty simple, but there are a few constraints:</p>
<ul>
<li>We want to search Google Books for the search query that the client sends, not our test string "Treasure Island"</li>
<li>We need to return valid HTML in our route, not a Python dictionary or a Response object.</li>
</ul>
<p>First, ensure that these imports are in your <code>app.py</code>.</p>
<pre><code class="python">from flask import Flask, render_template, request
import requests
...
</code></pre>

<p>Then, modify your search route to handle POST and GET requests:</p>
<pre><code class="python">...
@app.route(&quot;/search&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
...
</code></pre>

<p>Now, we can take different actions depending on whether we have a POST request or a GET request.</p>
<pre><code class="python">...
@app.route(&quot;/search&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
def search():
    if request.method == &quot;POST&quot;:
        # User has used the search box
    else: # request.method == &quot;GET&quot;
        # User is loading the page
...
</code></pre>

<p>We know that when the method is a GET request, we can simply return the search page that we created earlier.</p>
<pre><code class="python">...
@app.route(&quot;/search&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
def search():
    if request.method == &quot;POST&quot;:
        # User has used the search box
    else: # request.method == &quot;GET&quot;
        return render_template(&quot;search.html&quot;)
...
</code></pre>

<p>For a POST request, we have to make an API call to the Google Books API and return a page containing the results. First, we use <code>request.form["user_search"]</code> to obtain the user query. Then, we use <code>requests.get(url).json()</code> to actually send the GET request and receive a json object back. Then, we can pass this data into a results template with Flask. Coming together, this is what it looks like:</p>
<pre><code class="python">...
@app.route(&quot;/search&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
def search():
    if request.method == &quot;POST&quot;:
        url = &quot;https://www.googleapis.com/books/v1/volumes?q=&quot; + request.form[&quot;user_search&quot;]
        response_dict = requests.get(url).json()
        return render_template(&quot;results.html&quot;, api_data=response_dict)
    else: # request.method == &quot;GET&quot;
        return render_template(&quot;search.html&quot;)
...
</code></pre>

<blockquote>
<p>Here the variable <code>api_data</code> has an arbitrary name chosen to be used from within the template.  Inside the template, we will refer the the data as <code>api_data</code>, not <code>response_dict</code>.  Often these two names will be the same, i.e. <code>response_dict=response_dict</code>, but we'll leave them different for clarity.</p>
</blockquote>
<p>We haven't written <code>results.html</code> yet, so the search functionality still isn't complete. Let's learn how to dynamically populate an HTML page with the data we get back from an API.</p>
<p><a id="using-javascript"></a></p>
<h3 id="325-extension-using-javascript">3.2.5 Extension: Using JavaScript</h3>
<p><em>If you're familiar with JavaScript and would prefer to interact with the Google Books API using JavaScript, we'll go over how
to do that in this section. If you don't know JavaScript, feel free to skip it.</em></p>
<p>Vanilla JavaScript has a way to interact with external APIs, but <a href="http://jquery.com/">jQuery</a>, a library of common
functions that simplifies your JavaScript, makes everything much easier. To include it, put the following lines into a new file called <code>js_test.html</code> in your working directory:</p>
<pre><code>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"&gt;&lt;/script&gt;
&lt;script src="script.js"&gt;&lt;/script&gt;
&lt;p&gt;Open the JavaScript Console!&lt;/p&gt;
</code></pre>
<p>After this is run, jQuery will be bound to the <code>$</code> object. All calls beginning with <code>$</code> are jQuery-related.</p>
<p>jQuery makes selecting DOM elements (that is, the HTML elements on your web page) incredibly simple using
<a href="http://api.jquery.com/category/selectors/">selectors</a>: to "select" all of the <code>img</code> elements on your page, do
<code>$("img")</code>; to select an element with id <code>example-id</code>, do <code>$("#example-id")</code>. Once an element is selected, you can
perform a number of actions with it; a fun one is <code>.fadeOut()</code>. See more at the
<a href="http://api.jquery.com/">jQuery API Documentation</a>.</p>
<p>jQuery also lets you perform <em>AJAX</em> (Asynchronous JavaScript and XML) requests easily. This is a mechanism that your
JavaScript can use to fetch new data without loading a new page (it's how your Gmail inbox knows you have a new message
without you refreshing the page). Create another file called <code>script.js</code> with the following lines:</p>
<pre><code class="javascript">$.getJSON(&quot;https://www.googleapis.com/books/v1/volumes?q=Treasure%20Island&quot;, function(data) {
    console.log(data);
});
</code></pre>

<p>Here (as before), we fetch all books that match the string "Treasure Island" and are written in JavaScript; we
then print it out to the JavaScript console (which can be accessed in the "Developer Tools" for Firefox (<code>Ctrl-Shift-K</code>)
or Chrome (<code>Ctrl-Shift-J</code>) (or <code>Cmd</code> for OS X).</p>
<p>Open up <code>test_js.html</code> in your browser and see the response from your JSON request in the JavaScript Console.</p>
<p>A couple of gotchas here:</p>
<ul>
<li>
<p>We add the parameter <code>callback=?</code>; this is a <a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a> callback to get around the
  <a href="https://en.wikipedia.org/wiki/Same-origin_policy">same-origin policy</a>. It's necessary for security reasons; for more
  information, see those links.</p>
</li>
<li>
<p>We process the data in a <em>callback</em> (that's the <code>function(data) { ... }</code> bit). This is because loading data over the
  internet takes time; rather than stop everything up while we're waiting for that to finish, JavaScript moves on and
  executes the next statement. We tell JavaScript what we want it to do once it's finished loading the data; that's the
  body of the function we pass to <code>getJSON</code>.</p>
</li>
</ul>
<p>That's it! You've successfully queried the Google Books API using JavaScript and jQuery.</p>
<p><a id="displaying-search-results"></a></p>
<h2 id="33-displaying-search-results">3.3 Displaying Search Results</h2>
<p>Now that we have JSON data, let's display the relevant books on a results page.</p>
<p><a id="template-variables-using-jinja2"></a></p>
<h3 id="331-template-variables-using-jinja2">3.3.1 Template Variables Using Jinja2</h3>
<p>Now displaying data as JSON is all well and good, but it would be great to display the content as HTML.  The problem is, we can't know at the point of writing our HTML what the response will be, so we'll use the more advanced templating features of Flask to dynamically create HTML.</p>
<p>We'll be using the <a href="http://jinja.pocoo.org/docs/templates/">Jinja2 templating engine</a> built into Flask. Using it, we can pass variables from our Python code into templates, essentially allowing us to incorporate variables in our HTML.</p>
<p>First, create a boilerplate HTML5 document called <code>results.html</code>:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Results&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Before we can start designing our template, we have to actually pass the variable into the template.  We do this in the <code>render_template()</code> function, where (<a href="http://flask.pocoo.org/docs/quickstart/#rendering-templates">as the documentation indicates</a>) we can pass variables as keyword arguments.</p>
<p>We've passed our data into the HTML document, so now we'll turn <code>results.html</code> into a dynamic template.  As a concept, lets have an unordered list of all the results, where each item represents a book with its title, authors, and link. </p>
<p>First, create an unordered list for the results.</p>
<pre><code class="html">...
&lt;body&gt;
    &lt;ul&gt;
    &lt;/ul&gt;
&lt;/body&gt;
...
</code></pre>

<p>Next, we'll iterate over all of the repositories in the <code>items</code> list using Jinja2's <a href="http://jinja.pocoo.org/docs/templates/#for">for loop syntax</a>, making a list item for each one.  We know to do this because of the JSON response structure we saw in section <a href="#viewing-json-in-the-browser">3.1.4</a>.  When <code>render_template()</code> is called on this template, Flask will replace the for loop with multiple instances of whatever is inside the <code>{%%}</code> tags.  </p>
<p>In general, Jinja2 code that contains <code>{%%}</code> is for control flow, and will not be displayed literally on the web page.</p>
<pre><code class="html">...
&lt;body&gt;
    &lt;ul&gt;
    {% for book in api_data[&quot;items&quot;] %}
        &lt;li&gt;&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
&lt;/body&gt;
...
</code></pre>

<p>Now lets populate the dynamic list item.  We can insert variables into Flask using the <code>{{ variable }}</code> syntax.</p>
<pre><code class="html">...
&lt;ul&gt;
{% for book in api_data[&quot;items&quot;] %}
    &lt;li&gt;
        &lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;
        &lt;h5&gt;
            {% for author in book.volumeInfo.authors %}
                &lt;ul&gt;{{ author }}&lt;/ul&gt;
            {% endfor %}
        &lt;/h5&gt;
    &lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
...
</code></pre>

<p>Now, visit <code>localhost:5000/search</code> again and submit a search. You should see a bulleted list of results for your search!</p>
<p><code>&lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;</code> makes the title of each book a link to its Google Books page. Notice that we also have an inner for loop because there can be multiple authors for any given book.</p>
<p><a id="extending-templates"></a></p>
<h3 id="332-extending-templates">3.3.2 Extending Templates</h3>
<p>Our results page looks great, but what if we want to do another search?  Let's put the search form and header at the top of <code>results.html</code> as well.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Results&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Search&lt;/h1&gt;
        &lt;form action=&quot;/search&quot; method=&quot;POST&quot;&gt;
            &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; id=&quot;user_search&quot; name=&quot;user_search&quot; required/&gt;
            &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;
        &lt;/form&gt;
        &lt;ul&gt;
            {% for book in api_data[&quot;items&quot;] %}
                &lt;li&gt;
                    &lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;
                    &lt;h5&gt;
                        {% for author in book.volumeInfo.authors %}
                            &lt;ul&gt;{{ author }}&lt;/ul&gt;
                        {% endfor %}
                    &lt;/h5&gt;
                &lt;/li&gt;
            {% endfor %}
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Noticing a lot of repeated code? You should.  <code>search.html</code> and <code>results.html</code> look very similar, and it would be great if we didn't have to reuse code.  </p>
<p>We can use <em>template inheritance</em> to reuse one template with another.  It's easy!  The <em>parent template</em> will be <code>search.html</code>, because it is more simple, and all of the code from it shows up in <code>results.html</code>.  In <code>search.html</code>, add a <a href="http://jinja.pocoo.org/docs/templates/#template-inheritance">Jinja2 block</a> that the child (<code>results.html</code>) will fill in:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Search&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Search&lt;/h1&gt;
        &lt;form action=&quot;/search&quot; method=&quot;POST&quot;&gt;
            &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; id=&quot;user_search&quot; name=&quot;user_search&quot; required/&gt;
            &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;
        &lt;/form&gt;
        {% block results %}{% endblock %}
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Next, we'll make <code>results.html</code> <em>extend</em>, or be a child of <code>search.html</code>.  To do this, add the following line at the beginning of <code>results.html</code>:</p>
<pre><code class="html">{% extends search.html %}
&lt;!DOCTYPE html&gt;
</code></pre>

<p>Now, we can delete everything that is in <code>search.html</code> from <code>results.html</code>, and just include the contents of our <code>{% block %}</code>.  Edit <code>results.html</code>:</p>
<pre><code class="html">{% extends &quot;search.html&quot; %}
{% block results %}
&lt;ul&gt;
{% for book in api_data[&quot;items&quot;] %}
    &lt;li&gt;
        &lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;
        &lt;h5&gt;
            {% for author in book.volumeInfo.authors %}
                &lt;ul&gt;{{ author }}&lt;/ul&gt;
            {% endfor %}
        &lt;/h5&gt;
    &lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
{% endblock %}
</code></pre>

<p>And that's it!  When <code>render_template()</code> is called on <code>results.html</code>, Flask sees that <code>results.html</code> extends <code>search.html</code>, so it renders <code>search.html</code> filling in any <code>{% block %}</code>s that were defined in <code>results.html</code>.  When <code>search.html</code> is rendered, the empty <code>{% block %}</code> is ignored.  </p>
<p>View it live!  You'll see the form persist into the results page, even though <code>results.html</code> doesn't have the form HTML in it.</p>
<p><a id="base-templates-and-style"></a></p>
<h3 id="333-base-templates-and-style">3.3.3 Base Templates and Style</h3>
<p>Now let's take a minute to add Foundation and CSS to the search and results pages. Instead of copy and pasting the Foundation set up over and over again, let's use templating to modularize it!</p>
<p>Create a file called <code>base.html</code> in the <code>/templates</code> directory. Here, we will place all of the code that is applicable to all of the other HTML files and let other files simply extend this one.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; &gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;{% block title %}{% endblock %}&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;{{ url_for('static', filename='css/foundation.css') }}&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;{{ url_for('static', filename='css/app.css') }}&quot;&gt;

&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;large-12 columns&quot;&gt;
          &lt;div class=&quot;panel&quot;&gt;
              {% block body %}{% endblock %}
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;

  &lt;script src=&quot;{{ url_for('static', filename='js/vendor/jquery.min.js') }}&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;{{ url_for('static', filename='js/foundation.js') }}&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
    $(document).foundation();
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><i>Note that we use <code>url_for</code> here to let Flask find the correct files for us.</i></p>
<p>Now, we can strip the other HTML files to their unique components and let inheritance take care of the common components:</p>
<p><code>hello.html</code>:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %} Reading List App {% endblock %}
{% block body %}
    &lt;h1&gt;Reading List App&lt;/h1&gt;
    &lt;p&gt;This web app allows users to search for books and add them to their reading lists!&lt;/p&gt;
    &lt;a href=&quot;/search&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Launch App&lt;/button&gt;&lt;/a&gt;
{% endblock %}
</code></pre>

<p><code>search.html</code>:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %} Search {% endblock %}
{% block body %}
    &lt;h1&gt;Search&lt;/h1&gt;
    &lt;form action=&quot;/search&quot; method=&quot;POST&quot;&gt;
        &lt;div class=&quot;small-10 columns&quot;&gt;
            &lt;input type=&quot;text&quot; placeholder=&quot;Search for a book&quot; id=&quot;user_search&quot; name=&quot;user_search&quot; required/&gt;
        &lt;/div&gt;
        &lt;div class=&quot;small-2 columns&quot;&gt;
            &lt;button class=&quot;postfix search-button&quot; type=&quot;submit&quot;&gt;Search&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
    {% block results %}{% endblock %}
{% endblock %}
</code></pre>

<p>We added some Foundation here in <code>search.html</code> to properly position the search bar and button.</p>
<p><code>results.html</code>:</p>
<pre><code class="html">{% extends &quot;search.html&quot; %}
{% block results %}
&lt;div class=&quot;results&quot;&gt;
    &lt;ul&gt;
    {% for book in api_data[&quot;items&quot;] %}
        &lt;li&gt;
            &lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;
            &lt;h5&gt;
                {% for author in book.volumeInfo.authors %}
                    &lt;ul&gt;{{ author }}&lt;/ul&gt;
                {% endfor %}
            &lt;/h5&gt;
        &lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
&lt;/div&gt;
{% endblock %}
</code></pre>

<p>Finally, let's style the results page. Add the following lines to <code>app.css</code>.</p>
<pre><code class="css">.results {
    text-align: left;
    margin-top: 100px;
}

li {
    list-style-type: none;
    padding-bottom: 25px;
}
</code></pre>

<p>Check out the app now at <code>localhost:5000</code>!</p>
<p><img alt="results" src="/webdev/img/level3_results.png" /></p>
<p><a id="templating-best-practices"></a></p>
<h3 id="325-extension-templating-best-practices">3.2.5 Extension: Templating Best-Practices</h3>
<p>Our <code>results.html</code> template works, but there are some corner cases that we'd be good to cover.  We'll be addressing some issues with the user experience of our app.  Figuring out that you have user experience problems can be hard to do, but as a rule of thumb, give your app to a few friends and see what they think after using it.</p>
<h4 id="empty-search-results">Empty search results</h4>
<p>What if there are no results from the search?  The <code>items</code> list will be empty, and no <code>&lt;li&gt;</code> elements will be rendered.  Lets have a fall back.  Using the <code>{% if %}</code> control statement, we can check if the <code>items</code> list exists and isn't empty, and display a message indicating a lack of results otherwise.</p>
<pre><code class="html">{% extends &quot;search.html&quot; %}
{% block results %}
&lt;div class=&quot;results&quot;&gt;
    {% if api_data[&quot;totalItems&quot;] &gt; 0 %}
        &lt;ul&gt;
        {% for book in api_data[&quot;items&quot;] %}
            &lt;li&gt;
                &lt;a href={{ book.accessInfo.webReaderLink }}&gt;&lt;h3&gt;{{ book.volumeInfo.title }}&lt;/h3&gt;&lt;/a&gt;
                &lt;h5&gt;
                    {% for author in book.volumeInfo.authors %}
                        &lt;ul&gt;{{ author }}&lt;/ul&gt;
                    {% endfor %}
                &lt;/h5&gt;
            &lt;/li&gt;
        {% endfor %}
        &lt;/ul&gt;
    {% else %}
        &lt;p&gt;There were no books found.&lt;/p&gt;
    {% endif %}
&lt;/div&gt;
{% endblock %}
</code></pre>

<h4 id="missing-data-members">Missing Data Members</h4>
<p>What if a book doesn't have an author listed?  Or the link is missing?  Whenever we use template variables, we should be sure that they exist first, lest the user see some ugly template error instead of your app.</p>
<p>As an exercise, wrap each <code>{{ }}</code> statement in a Jinja2 <code>{% if %}</code>, checking if the variable exists before using it.</p>
<p><a href="#top" class="top" id="level4">Top</a></p>
<h1 id="level-4-storing-favorites-databases">Level 4: Storing Favorites: Databases</h1>
<blockquote>
<p>If you have not completed the previous levels, download the starter code for level 4 <a href="https://github.com/RaymondXu/devfest-webdev-track-code/tree/level4">here</a>.</p>
</blockquote>
<p>Right now, our website allows us to search for books. However, it would be nice if we had a way to save books that looked interesting. Let's work on adding a "Favorites" feature, which will allow us to mark our favorite books.</p>
<p><a href="#top" class="top" id="mongo-db">Top</a></p>
<h2 id="41-using-mongodb">4.1 Using MongoDB</h2>
<p>To store favorites for our application, we're going to be using a database called MongoDB.</p>
<p><a id="what-database"></a></p>
<h3 id="411-what-is-a-database">4.1.1 What is a database?</h3>
<p>In order to store favorites for our app, we'll need to use a database. A <a href="https://en.wikipedia.org/wiki/Database">database</a> is essentially just an organized collection of data. The data can be anything: bank transactions, songs, restaurant reservations, anything. As long as you have an organized way of representing it, you can store it.</p>
<p>Databases are incredibly common; almost every application that you have ever used probably has a database to store some kind of data. There's a lot of things you can do with a database, but for this tutorial we'll only focus on the basics, which can be remembered by the <a href="https://docs.mongodb.org/manual/crud/">CRUD</a> acronym: create, read, update, and delete.</p>
<p><a id="what-mongo"></a></p>
<h3 id="412-what-is-mongodb">4.1.2 What is MongoDB?</h3>
<p>There are several different kinds of databases you may have heard of. Some common ones are <a href="https://www.mysql.com/">MySQL</a>, <a href="https://www.oracle.com/database/index.html">Oracle</a>, and <a href="http://www.postgresql.org/">PostgreSQL</a>. However, the one that we're going to be using is <strong>MongoDB</strong>. <a href="https://www.mongodb.org/">Mongo</a>, as it is more commonly known, will allow us to quickly and easily start storing data, which will great for our purposes.</p>
<p>MongoDB is what's called a <a href="/webdev/build/nosql">NoSQL</a> database, which means data isn't stored in the common SQL formatting. Think of SQL data like rows in a spreadsheet: there's a header value for each column of the spreadsheet, and the rows of each spreadsheet provide a value for each of the columns. NoSQL data doesn't use this kind of storage; instead, each object is stored as its own chunk of data and doesn't relate to the other rows in the same way.</p>
<p><a id="flask-mongo"></a></p>
<h3 id="413-using-flask-mongoengine">4.1.3 Using Flask-Mongoengine</h3>
<p>To use MongoDB, Flask provides a really nice add-on called <a href="http://flask-mongoengine.readthedocs.org/en/latest/"><code>Flask-Mongoengine</code></a>, which allows us to perform our CRUD operations directly from our Flask app.</p>
<p>To get started using MongoDB, first install it! Follow the instruction guide for your operating system <a href="https://docs.mongodb.org/v3.0/installation/#installation-guides">here</a>).</p>
<p>Once you've done that, we'll need to install <code>Flask-Mongoengine</code>. Ensure your <code>virtualenv</code> virtual environment is activated (you should see the name of your directory prepended to your terminal prompt). Then, run the following command:</p>
<pre><code class="bash">$ sudo pip install flask-mongoengine
</code></pre>

<p>Now that we have our database and Flask library ready to go, let's create a database object for our app to use. Add the following code at the top of your <code>app.py</code> file:</p>
<pre><code class="python">from flask.ext.mongoengine import MongoEngine
...
app.config['MONGODB_SETTINGS'] = { 'db' : 'books' }
...
db = MongoEngine(app)
</code></pre>

<p>The import statement brings in the <code>MongoEngine</code> object, which is the basic object we'll be using for our app. Next, below our other <code>app.config</code> changes, we'll add the settings for MongoDB: basically, we just say the database that we'll be using will be called "books". Next, we create an instance of our MongoEngine class, which we'll use later.</p>
<p><a href="#top" class="top" id="model">Top</a></p>
<h2 id="42-adding-a-model">4.2 Adding a Model</h2>
<p>Now that we have our database all set up, we need to specify what kind of data we're going to be storing. Generally, to specify this, we create a <a href="https://en.wikipedia.org/wiki/Database_model">database model</a>, which determines what our data is and how it will be stored. Let's work on creating our model.</p>
<p><a id="fav-book"></a></p>
<h3 id="421-creating-a-favoritebook-model">4.2.1 Creating a <code>FavoriteBook</code> Model</h3>
<p>Since we're storing books that we're marking as favorites, let's create a model called <code>FavoriteBook</code>. To store this, we're going to need three things: the author's name, the name of the book, and the link to the book. We can include all of those things in our model.</p>
<p>In your <code>app.py</code> file, just below the line in which we instantiate <code>db</code>, add the following code to create our model:</p>
<pre><code class="python">class FavoriteBook(db.Document):
    author = db.StringField(required=True)
    title = db.StringField(required=True)
    link = db.StringField(required=True)
</code></pre>

<p>(NOTE: generally it's best to not keep models in the same file as all your other logic. We could've also created a new file called <code>models.py</code> and put our code there. However, for the sake of this tutorial, we only have one model, so it makes sense to keep it all in the same file.)</p>
<p><a id="create-save"></a></p>
<h3 id="422-creating-and-saving-objects">4.2.2 Creating and Saving Objects</h3>
<p>Now that we have our model created, we're going to want to actually create a model to save a model as a favorite. To do that, let's first add a button to each of our search results. Below the <code>h5</code> tag that shows our authors, add the following code to provide a link to do so:</p>
<pre><code class="html">&lt;a href=&quot;/favorite/{{ book.id }}&quot;&gt;Add to favorites&lt;/a&gt;
</code></pre>

<p>Our search page should now look like this:</p>
<p><img alt="Add to Favs" src="https://dl.dropboxusercontent.com/s/xlzxfdvjdahkan4/add-to-favs.png" /></p>
<p>You'll notice that our link refers to a new route called <code>favorite</code> - to it, we pass the id of the book as a parameter so we know what book we're adding to favorites. Try clicking on the link; you should get a 404 error. That's because we haven't created the <code>/favorite</code> endpoint yet. Let's do that now!</p>
<p>In our <code>app.py</code> file, create a new route and function that looks as follows:</p>
<pre><code class="python">@app.route(&quot;/favorite/&lt;id&gt;&quot;)
def favorite(id):
</code></pre>

<p>You'll notice <code>&lt;id&gt;</code> in the URL route we're intercepting. This is a really cool feature Flask includes; it allows us to take variable parts of a URL and pass them to our route function. So when we pass the ID of the book as to the URL, like we did above, we'll get it as a parameter passes to our function. So, for example, if Flask intercept the route <code>/favorite/12345</code>, when our function is called, <code>id</code> will equal <code>12345</code>; this allows us to customize what our function does depending on whatever is passed into us.</p>
<p>Now that we have access to our book ID, let's create our model and save it to our database! The following code, added to our <code>favorite</code> function, should do it:</p>
<pre><code class="python">book_url = &quot;https://www.googleapis.com/books/v1/volumes/&quot; + id
book_dict = requests.get(book_url).json()
new_fav = FavoriteBook(author=book_dict[&quot;volumeInfo&quot;][&quot;authors&quot;][0], title=book_dict[&quot;volumeInfo&quot;][&quot;title&quot;], link=book_url)
new_fav.save()
return render_template(&quot;confirm.html&quot;, api_data=book_dict)
</code></pre>

<p>First, we create the URL for our book, which just appends the ID to our base URL. Then, we query the API with the link, so we have all the information we need. Next, we create our new model; we pass the info from our API results, taking the first author's name, the title of the book, and the Google Books URL. Once we've done this, all we need to is called <code>.save()</code> on our newly created object, and it is saved to our database. It's that easy! Simply create a new object using our default constructor and call the <code>save()</code> method, and our data will be persisted to MongoDB.</p>
<p>Finally, we pass our book data to a new template called <code>confirm.html</code>; create that now to provide a page that confirms that our book was added to favorites. Create a new file called <code>confirm.html</code> and add this to it:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %} Favorite Added {% endblock %}
{% block body %}
    &lt;h1&gt;Reading List App&lt;/h1&gt;
    &lt;p&gt;Thanks for adding {{api_data.volumeInfo.title}} to your favorites.&lt;/p&gt;
    &lt;a href=&quot;/favorites&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;View Favorites&lt;/button&gt;&lt;/a&gt;
{% endblock %}
</code></pre>

<p>Once we do this, you should see a screen that looks something like this:</p>
<p><img alt="Fav Confirm" src="https://dl.dropboxusercontent.com/s/xgzk1ldkcfvziq0/fav-add.png" /></p>
<p>Now that we're done, we're all done with the functionality to add books to our favorites!</p>
<p><a href="#top" class="top" id="view-fav">Top</a></p>
<h2 id="43-viewing-favorites">4.3 Viewing Favorites</h2>
<p>Now that we've started adding books to our favorites, we'll need a screen to view all the books we've already added to favorites. Let's build that now.</p>
<p><a id="query-obj"></a></p>
<h3 id="431-querying-for-objects">4.3.1 Querying for Objects</h3>
<p>We've already seen how to create objects; now, we'll need a way to pull objects out of our database. The code for that will look as follows:</p>
<pre><code>books = FavoriteBook.objects()
</code></pre>

<p>It's as simple as that; to get all the <code>FavoriteBook</code> objects we have stored, all we have to do is call the <code>objects()</code> function. We can optionally pass checks we want to do as parameters to this function call. For example, say we want to see whether the user has favorited <code>Great Expectations</code>, we could say <code>book = FavoriteBook.objects(title='Great Expectations')</code>, which would only return the book (or books) that have that as the title. In our case, however, we'll want all of the books.</p>
<p><a id="list-obj"></a></p>
<h3 id="432-presenting-a-list-of-favorites">4.3.2 Presenting a List of Favorites</h3>
<p>You may have noticed that, in our <code>confirm.html</code> template, we added a button to allow us to see the list of favorites we've created thus far. For that, we added an endpoint <code>/favorites</code>, which will be our list of books we've identified as favorites. We're going to handle that endpoint now.</p>
<p>To your <code>app.py</code> file, add a route at the bottom, as follows:</p>
<pre><code class="python">@app.route(&quot;/favorites&quot;)
def favorites():
  favorites = FavoriteBook.objects()
  return render_template(&quot;favorites.html&quot;, favorites=favorites)
</code></pre>

<p>As you'll see, the code is quite simple. We just query for all of our <code>FavoriteBook</code> objects, as we did above, and then pass them to a template called <code>favorites.html</code>. We'll need to create that file, so create a new file with that name in the <code>templates/</code> directory. It should look as follows:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %}Favorites{% endblock %}
{% block body %}
&lt;h1&gt;Favorites&lt;/h1&gt;
{% if favorites|length &gt; 0 %}
    &lt;ul&gt;
    {% for fav in favorites  %}
        &lt;li&gt;
            &lt;a href={{ fav.link }}&gt;&lt;h3&gt;{{ fav.title }}&lt;/h3&gt;&lt;/a&gt;
            &lt;h5&gt;&lt;ul&gt;{{ fav.author }}&lt;/ul&gt;&lt;/h5&gt;
        &lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
{% else %}
    &lt;p&gt;You haven't added any favorites yet.&lt;/p&gt;
{% endif %}
{% endblock %}
</code></pre>

<p>The template looks pretty similar to results. We show a list of each of the favorites, or if there are zero favorites then we show that message. Then, just as we did for the JSON objects, we can refer to the attributes of our model with the Python dot syntax. Thus, to show the title of a book, we simply say <code>fav.title</code> inside the template.</p>
<p>Try adding some books to your favorites. Your page should look something like this:</p>
<p><img alt="Favorites List" src="https://dl.dropboxusercontent.com/s/fei3c94d2bh2v9f/favorites.png" /></p>
<p><a href="#top" class="top" id="level5">Top</a></p>
<h1 id="level-5-adding-user-specific-favorites-sessions-accounts">Level 5: Adding User-Specific Favorites: Sessions &amp; Accounts</h1>
<blockquote>
<p>If you have not completed the previous levels, download the starter code for level 5 <a href="https://github.com/RaymondXu/devfest-webdev-track-code/tree/level5">here</a>.</p>
</blockquote>
<p>If you add lots of favorites to your list, you'll notice it might get crowded. If you're going to have more than one user, it probably makes sense to have a favorites list for each user of your website; that way, different users can have different favorites. We're going to work on that in this section.</p>
<p><a href="#top" class="top" id="flask-login">Top</a></p>
<h2 id="51-using-flask-login">5.1 Using <code>Flask-Login</code></h2>
<p>Generally, to have users log in and out of your application, you need to use what's called a user session. The session, as this <a href="http://stackoverflow.com/questions/3804209/what-are-sessions-how-do-they-work">Stack Overflow</a> answer describes, essentially passes data back and forth with every request, providing an id that only the client has access to. Generally, the passing of these id's can get pretty messy. Luckily, there's a great extension for Flask called <a href="https://flask-login.readthedocs.org/en/latest/"><code>Flask-Login</code></a> that makes handling these sessions much more manageable.</p>
<p><a id="install-login"></a></p>
<h3 id="511-installing-flask-login">5.1.1 Installing <code>Flask-Login</code></h3>
<p>Before we begin, we'll need to install our new extension. To do so, run the following command, as we've been doing for each of our new installations:</p>
<pre><code class="bash">$ sudo pip install flask-login
</code></pre>

<p>Next, we'll need to do some configuration; most importantly, we need to create a login manager object that will work on our behalf.</p>
<p>Open up <code>app.py</code>. At the top, add the following <code>import</code> statement:</p>
<pre><code class="python">from flask.ext.login import LoginManager
</code></pre>

<p>Next, just below where we declare <code>app</code>, add the following two lines to create our login manager object:</p>
<pre><code class="python">login_manager = LoginManager()
login_manager.init_app(app)
</code></pre>

<p><a id="user_obj"></a></p>
<h3 id="512-creating-a-user-object">5.1.2 Creating a User Object</h3>
<p>As you can read about in its documentation, <code>Flask-Login</code> requires that we provide a class called <code>User</code> to it; this will represent each user of the service, which the extension will handle the logging in and out of.</p>
<p>The extension also requires us to implement four methods in our <code>User</code> class: <code>is_authenticated</code>, <code>is_active</code>, <code>is_anonymous</code>, and <code>get_id</code>. Each of these methods represents something that the <code>Flask-Login</code> library will need to know to take care of user login.</p>
<p>In <code>app.py</code>, let's add the following <code>User</code> class, just above where we defined <code>FavoriteBook</code> before:</p>
<pre><code class="python">class User(db.Document):
  name = db.StringField(required=True,unique=True)
  password = db.StringField(required=True)
  def is_authenticated(self):
    users = User.objects(name=self.name, password=self.password)
    return len(users) != 0
  def is_active(self):
    return True
  def is_anonymous(self):
    return False
  def get_id(self):
    return self.name
</code></pre>

<p>Let's look at the code a little bit more in-depth. First, we add two fields: <code>name</code> and <code>password</code>. This user is going to be pretty simple. Also worth noting, we make sure the name is unique, as this will be our identifying attribute.</p>
<p>Next, we see the implementation of each of the four methods we discussed before. <code>is_active</code> and <code>is_anonymous</code> are boring, and we just return the same thing each time. For <code>is_authenticated</code>, we check our database to see if a user exists that matches the one we currently have; if so, it returns true. For <code>get_id</code>, we simply pass back the name; we need these id's to be unique, which is why we defined the name above to be unique.</p>
<p><a id="user_loader"></a></p>
<h3 id="513-adding-the-user_loader">5.1.3 Adding the <code>user_loader</code></h3>
<p><code>Flask-Login</code> requires us to do one more thing: provide a way to load a user. Essentially, we'll need a way to, given an id, load a user. To identify this function, we can use the <code>@login_manager.user_loader</code> decorator so that the extension knows which method to call. Add the code for this ust below our <code>User</code> class definition:</p>
<pre><code class="python">@login_manager.user_loader
def load_user(name):
  users = User.objects(name=name)
  if len(users) != 0:
    return users[0]
  else:
    return None
</code></pre>

<p>Once we're done with this, we're all done creating our user objects, and <code>Flask-Login</code> should be all set to use.</p>
<p><a href="#top" class="top" id="register_login">Top</a></p>
<h2 id="52-handling-registration-and-login">5.2 Handling Registration and Login</h2>
<p>There are two problems with our above <code>Flask-Login</code> situation: first, there's no page to sign-in, and second, there are no user accounts that we can sign into. To fix these problems, we'll need ways to register and login.</p>
<p><a id="wtforms"></a></p>
<h3 id="521-create-a-userform-with-wtforms">5.2.1 Create a <code>UserForm</code> with WTForms</h3>
<p><code>WTForms</code> is an incredibly useful library that helps us to generate forms that are really easy to validate. Form validation can be an incredibly tedious task. Normally you have to write custom JavaScript to check all sorts of things. Do the passwords match? Is your email address the correct format? Did you fill out all the required inputs? <code>WTForms</code> makes this really easy to do.</p>
<p>Particularly useful is a method called <code>model_form</code>, which automatically creates a form given a <code>MongoEngine</code> model. So, given the <code>User</code> object we just created, creating a form for it can be done in two lines. Add these just under your <code>User</code> class definition:</p>
<pre><code class="python">UserForm = model_form(User)
UserForm.password = PasswordField('password')
</code></pre>

<p>(Note: add the following import statements at the top: <code>from flask.ext.mongoengine.wtf import model_form</code> and <code>from wtforms import PasswordField</code>).</p>
<p>Now, we have a new object called <code>UserForm</code>, which represents a form that will gather all of the fields that we have in our <code>User</code> object; how cool is that?! Imagine we had 40 different fields for our <code>User</code> object - <code>UserForm</code> would be a form that had 40 inputs and custom validators to make sure they matched all the restrictions we put on them. The second line simply changes our <code>password</code> field (corresponding to the <code>password</code> object in <code>User</code>) to a PasswordField, so that the text is obfuscated when users type in their passwords.</p>
<p><a id="register"></a></p>
<h3 id="522-creating-a-registration-page">5.2.2 Creating a Registration Page</h3>
<p>Now that we have the form, let's add a new route, <code>/register</code>. Add this anywhere in your <code>app.py</code> file:</p>
<pre><code class="python">@app.route(&quot;/register&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
def register():
  form = UserForm(request.form)
  if request.method == 'POST' and form.validate():
    form.save()
    return redirect(&quot;/login&quot;)

  return render_template(&quot;register.html&quot;, form=form)
</code></pre>

<p>First, we create an instance of our <code>UserForm</code> object given the form data passed in our request. If we're posting data, we try to validate it (meaning all of our fields match the conditions we applied to them - i.e. less than the minimum length, unique, etc.). Then, to save the model that our data represents, all we have to do is call <code>form.save()</code>. Think about what that means; we can type 'matt' and 'password', call <code>.save()</code> on the form, and our database automatically has a new <code>User</code> object added to it. This simplicity makes the <code>MongoEngine</code>/<code>WTForms</code> combination very useful. Assuming a successful save, we'll just redirect to the login page (which we'll make next).</p>
<p>In the case that our form isn't ready yet (or we haven't filled it out yet), we need to pass it to the user to be seen! To do that, we created the <code>register.html</code>; create your new file and add this content to it:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %}Register{% endblock %}
{% block body %}
&lt;h2&gt;Register&lt;/h2&gt;

&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;
  {{ form.csrf_token }}
  &lt;div&gt;
    {{ form.name.label}}
    {{ form.name }}
  &lt;/div&gt;
  &lt;div&gt;
    {{ form.password.label }}
    {{ form.password }}
  &lt;/div&gt;
  &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;
&lt;/form&gt;
{% endblock %}
</code></pre>

<p>The template is really easy. We create a new form, and for each of the fields in our form, simply display their label and their actual input field. Then, we add a submit button that says "Register". </p>
<p>Something interesting you may note is the use of the <code>csrf_token</code>. CSRF stands for cross-site registration forgery; it can do damage to your website by allowing people from other sites to post things to your website maliciously. To do that, we use what's called a token that can only be uniquely identified for our application. To do that, add the following config lines at the top of our <code>app.py</code> file:</p>
<pre><code class="python">app.config['SECRET_KEY'] = '&lt;insert random string&gt;'
app.config['WTF_CSRF_ENABLED'] = True
</code></pre>

<p>Pick your own secret key, but make sure it's long and unique.</p>
<p>(NOTE: You will have to add <code>redirect</code> to the top <code>from flask</code> import statement.)</p>
<p>Try going to <code>localhost:5000/register</code>. It should look something like this:</p>
<p><img alt="Register" src="https://dl.dropboxusercontent.com/s/j7ggzjyj7jyyvo3/register.png" /></p>
<p>Fill out the form and press register; if all goes according to plan, you should be redirected to the <code>/login</code> page, which should give you a 404 error. Let's make that page now.</p>
<p><a id="login"></a></p>
<h3 id="523-creating-a-login-page">5.2.3 Creating a Login Page</h3>
<p>The login page should end up looking quite similar to the registration page. However, on the backend, we'll need to make a couple changes; we'll need to login a user, rather than saving a new user to our database. For this, we'll make use of the <code>FlaskLogin</code> material we configured in the last step.</p>
<p>Create a new route for <code>/login</code>. Your function should look like this:</p>
<pre><code class="python">@app.route('/login', methods=['GET', 'POST'])
def login():
  form = UserForm(request.form)
  if request.method == 'POST' and form.validate():
    user = User(name=form.name.data,password=form.password.data)
    login_user(user)
    return redirect('/search')

  return render_template('login.html', form=form)
</code></pre>

<p>Just like last time, we create a new <code>UserForm</code> (we can reuse the form because, just like registration, it takes a username and password). If our form validates, we create a new user object given our username and password. Then, in a very important line, we call the <code>FlaskLogin</code> built-in function <code>login_user</code> (you'll need to add <code>login_user</code> in our <code>from flask.ext.login</code> line). This function will make use of the other methods we already implemented (<code>is_authenticated</code>, <code>get_id</code>, etc.); if it's successful, we'll continue in our execution, and if not, <code>FlaskLogin</code> will throw an error.</p>
<p>In the case that we have a successful login, we'll be redirected to our <code>/search</code> page, which is the app's homepage. In the case where we haven't posted yet, we'll render <code>login.html</code>, a new template you should create. Its code will look like this:</p>
<pre><code class="html">{% extends &quot;base.html&quot; %}
{% block title %}Login{% endblock %}
{% block body %}
&lt;h2&gt;Login&lt;/h2&gt;

&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;
  {{ form.csrf_token }}
  &lt;div&gt;
    {{ form.name.label}}
    {{ form.name }}
  &lt;/div&gt;
  &lt;div&gt;
    {{ form.password.label }}
    {{ form.password }}
  &lt;/div&gt;
  &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;
&lt;/form&gt;
{% endblock %}
</code></pre>

<p>The page will look like very similar to our registration page. Try logging in, and you should see the search page.</p>
<p><a id="logout"></a></p>
<h3 id="524-adding-logout">5.2.4 Adding Logout</h3>
<p>Logout is easier, because we don't need a dedicated page. Let's make a <code>/logout</code> route that, when visited, will simply log a user out:</p>
<pre><code class="python">@app.route(&quot;/logout&quot;)
def logout():
    logout_user()
    return redirect(&quot;/&quot;)
</code></pre>

<p>After you add the <code>logout_user</code> function to your <code>flask.ext.login</code> import statement, you should be able to logout and return to the homepage.</p>
<p><a id="homepage-but"></a></p>
<h3 id="525-adding-home-page-buttons">5.2.5 Adding Home Page Buttons</h3>
<p>Now that we have registration and login options, let's show our users how to get to them. We can do this by changing the buttons on our home page.</p>
<p>Open up <code>hello.html</code>. Currently, we have a button that says "Launch App":</p>
<pre><code class="html">&lt;a href=&quot;/search&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Launch App&lt;/button&gt;&lt;/a&gt;
</code></pre>

<p>Let's remove this code, adding in its place two buttons, one for register and one for login:</p>
<pre><code class="html">&lt;a href=&quot;/login&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Login&lt;/button&gt;&lt;/a&gt;
&lt;a href=&quot;/register&quot;&gt;&lt;button class=&quot;launch-button&quot;&gt;Register&lt;/button&gt;&lt;/a&gt;
</code></pre>

<p><img alt="Register Button" src="https://dl.dropboxusercontent.com/s/ujlrckfs59ss80q/homescreen-register.png" /></p>
<p><a href="#top" class="top" id="personal-favs">Top</a></p>
<h2 id="53-personalizing-favorites">5.3 Personalizing Favorites</h2>
<p>Now that we have user accounts that we can register and log in and out of, it's time to finish off the job. Let's use the accounts we've created to make sure every user gets her own favorite reading list.</p>
<p><a id="login_required"></a></p>
<h3 id="531-using-login_required">5.3.1 Using <code>@login_required</code></h3>
<p>A pretty useful decorator can help us to make favorites personalized. Any page that you want to be blocked to users that are not logged in can be blocked by simply adding this decorator. For example, let's make it such that only users who are logged in can access the <code>/search</code> page. To do that, I just change the function definition to look as follows:</p>
<pre><code class="python">@app.route(&quot;/search&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])
@login_required
def search():
</code></pre>

<p>First, go to <code>localhost:5000/logout</code> to make sure you're logged out. Then, try going to <code>localhost:5000/search</code>; you should see a screen like this:</p>
<p><img alt="Unauthorized" src="https://dl.dropboxusercontent.com/s/lwrcmm9sh5zduue/unauth.png" /></p>
<p>This is great! We won't need to start every route we write with an if statement to see if a user is logged in. This is also a big step to making our data sensitive between users. For fullness' sake, add the <code>@login_required</code> decorator to <code>/favorite/&lt;id&gt;</code> and <code>/favorites</code> as well; those pages only make sense if we have a user.</p>
<p>(NOTE: per usual, remember you'll have to import the <code>login_required</code> decorator.)</p>
<p><a id="add_user_fav"></a></p>
<h3 id="532-adding-user-to-favoritebook">5.3.2 Adding <code>User</code> to <code>FavoriteBook</code></h3>
<p>If we think back to our <code>FavoriteBook</code> model, we had three attributes: title, author, and link. However, this model pays no attention to who marked it as a favorite. Now that we have the user accounts to support this, we should remember whose favorite book it is. Let's do that by editing the model:</p>
<pre><code class="python">class User(db.Document):
  name = db.StringField(required=True,unique=True)
  password = db.StringField(required=True)
  def is_authenticated(self):
    users = User.objects(name=self.name, password=self.password)
    return len(users) != 0
  def is_active(self):
    return True
  def is_anonymous(self):
    return False
  def get_id(self):
    return self.name

class FavoriteBook(db.Document):
  author = db.StringField(required=True)
  title = db.StringField(required=True)
  link = db.StringField(required=True)
  poster = db.ReferenceField(User)
</code></pre>

<p>Our two models will now look like this. You'll notice, at the bottom we added <code>poster = db.ReferenceField(User)</code>. A <code>ReferenceField</code> object, as you might guess, references another type of object. In this case, we pass in a <code>User</code> object; there will be a user associated with each <code>FavoriteBook</code>, and we'll call that user the poster.</p>
<p>Just for the sake of emptying out old data, let's remove all the favorite books we have thus far; they don't have posters attached, so it'll be bad when we don't have any user account to show them in.</p>
<p>To do this, let's open the Mongo shell. The shell is essentially a way to perform all the different commands we've been running, like <code>FavoriteBook.objects()</code>, but in a command-line interface. To start, simply type <code>mongo</code> to open up this shell. After it was open, I typed the following commands to remove all my previously recorded <code>FavoriteBook</code> items:</p>
<pre><code class="bash">$ use books
switched to db books
$ db.favorite_book.remove({})
WriteResult({ &quot;nRemoved&quot; : 2 })
</code></pre>

<p>First, we switch to our <code>books</code> database, which is the name we previously provided in the Flask config. Then, we remove the <code>favorite_book</code> items we already have stored; you'll see I removed 2. To read more about the Mongo shell (you should! it's awesome!), visit <a href="https://docs.mongodb.org/manual/reference/mongo-shell/">this website</a>.</p>
<p>Now that we've removed all our old data, let's update <code>/favorite/&lt;id&gt;</code> to provide our <code>poster</code> object, so we know each favorite book has a user associated with it:</p>
<pre><code class="python">@app.route(&quot;/favorite/&lt;id&gt;&quot;)
@login_required
def favorite(id):
  book_url = &quot;https://www.googleapis.com/books/v1/volumes/&quot; + id
  book_dict = requests.get(book_url).json()
  poster = User.objects(name=current_user.name).first()
  new_fav = FavoriteBook(author=book_dict[&quot;volumeInfo&quot;][&quot;authors&quot;][0], title=book_dict[&quot;volumeInfo&quot;][&quot;title&quot;], link=book_url, poster=poster)
  new_fav.save()
  return render_template(&quot;confirm.html&quot;, api_data=book_dict)
</code></pre>

<p>Basically everything stays the same, except we query for the current user object with the call <code>User.objects(name=current_user.name).first()</code>. Be sure to import <code>current_user</code>, as it's a built-in variable for <code>FlaskLogin</code>. We can be sure to return <code>first()</code> because login is required on this page, which means that we will certainly have a user of the name of the currently logged-in user.</p>
<p>Try adding a few favorite books to your account; if everything works normally, then that means we're very close to finishing our app!</p>
<p><a id="change_fav_page"></a></p>
<h3 id="533-changing-our-favorites-page">5.3.3 Changing our Favorites Page</h3>
<p>Now, let's make the final changes to our <code>/favorites</code> page so that we only see favorite books posted by our own account. For the <code>/favorites</code> route, let's change the function to look as follows:</p>
<pre><code class="python">@app.route(&quot;/favorites&quot;)
@login_required
def favorites():
  current_poster = User.objects(name=current_user.name).first()
  favorites = FavoriteBook.objects(poster=current_poster`)
  return render_template(&quot;favorites.html&quot;, current_user=current_user, favorites=favorites)
</code></pre>

<p>With one small tweak, we only load the <code>FavoriteBook</code> objects who have the poster equal to the current user. Then, to add a little bit more detail, we pass the <code>current_user</code> object to the template; that way, we can make our page a little bit more personalized.</p>
<p>In <code>favorites.html</code>, we changed the <code>&lt;h1&gt;</code> line so that it looks like this:</p>
<pre><code class="html">&lt;h1&gt;{{current_user.name}}'s Favorites&lt;/h1&gt;
</code></pre>

<p>This way, we can access the name of the current user and show that to the user. 
To view our finalized product, check out my personalized page, after I added a few favorites:</p>
<p><img alt="Personalized Recommendations" src="https://dl.dropboxusercontent.com/s/7z9vv03tpydvwvk/personalfaves.png" /></p>
<p>Congratulations! You have completed the DevFest 2016 Web Development Track and built a fully-functional reading list app. Now, you can be creative and add more features to the app, change the look of the webpages, or anything you can imagine. You can also build an entirely different web app using the skills you have just learned!</p>
<p>Thanks for reading!</p>
<p><a href="#top" class="top" id="additionalresources">Top</a></p>
<h1 id="additional-resources">Additional Resources</h1>
<p>Along with this tutorial, there is a wealth of information available on Python, Flask, and web development all across the web. Below are some good places to start:</p>
<ul>
<li><a href="http://adicu.com/learn">ADI Resources</a></li>
<li><a href="http://www.codecademy.com">Codecademy</a></li>
<li><a href="http://flask.pocoo.org/">Flask Documentation</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">Flask Mega Tutorial</a></li>
<li><a href="http://www.csszengarden.com/">CSS Zen Garden</a></li>
<li><a href="http://jinja.pocoo.org/">Jinja Templates</a></li>
</ul>
<!-- python/flask -->

<!-- google books api -->

<!-- networking -->

<!--HTML-->

<!-- CSS -->

<!-- favorites -->

<!-- login -->

<!-- tools -->

<!-- Other resources -->
<!-- Asynchronous Google Analytics snippet -->
<script>
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-18504951-1']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body></html>
